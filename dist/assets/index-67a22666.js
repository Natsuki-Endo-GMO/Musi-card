var tn=Object.defineProperty;var rn=(e,t,s)=>t in e?tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var fr=(e,t,s)=>(rn(e,typeof t!="symbol"?t+"":t,s),s);import{r as N,a as Dr,g as zr,b as sn}from"./vendor-280e31ee.js";import{u as fe,L as me,a as Fr,b as nn,R as on,c as le,B as an}from"./router-6549865d.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();const ln="modulepreload",cn=function(e){return"/"+e},gr={},dn=function(t,s,n){if(!s||s.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(s.map(a=>{if(a=cn(a),a in gr)return;gr[a]=!0;const i=a.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!n)for(let u=o.length-1;u>=0;u--){const f=o[u];if(f.href===a&&(!i||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":ln,i||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),i)return new Promise((u,f)=>{d.addEventListener("load",u),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a})};var Vr={exports:{}},it={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var un=N,hn=Symbol.for("react.element"),mn=Symbol.for("react.fragment"),fn=Object.prototype.hasOwnProperty,gn=un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pn={key:!0,ref:!0,__self:!0,__source:!0};function Hr(e,t,s){var n,o={},a=null,i=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)fn.call(t,n)&&!pn.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:hn,type:e,key:a,ref:i,props:o,_owner:gn.current}}it.Fragment=mn;it.jsx=Hr;it.jsxs=Hr;Vr.exports=it;var r=Vr.exports,Ut={},pr=Dr;Ut.createRoot=pr.createRoot,Ut.hydrateRoot=pr.hydrateRoot;function Wr(e,t){return function(){return e.apply(t,arguments)}}const{toString:xn}=Object.prototype,{getPrototypeOf:Qt}=Object,{iterator:lt,toStringTag:Jr}=Symbol,ct=(e=>t=>{const s=xn.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),se=e=>(e=e.toLowerCase(),t=>ct(t)===e),dt=e=>t=>typeof t===e,{isArray:Ee}=Array,_e=dt("undefined");function bn(e){return e!==null&&!_e(e)&&e.constructor!==null&&!_e(e.constructor)&&Z(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Yr=se("ArrayBuffer");function wn(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Yr(e.buffer),t}const yn=dt("string"),Z=dt("function"),qr=dt("number"),ut=e=>e!==null&&typeof e=="object",vn=e=>e===!0||e===!1,Ye=e=>{if(ct(e)!=="object")return!1;const t=Qt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Jr in e)&&!(lt in e)},jn=se("Date"),Nn=se("File"),Sn=se("Blob"),kn=se("FileList"),Cn=e=>ut(e)&&Z(e.pipe),En=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Z(e.append)&&((t=ct(e))==="formdata"||t==="object"&&Z(e.toString)&&e.toString()==="[object FormData]"))},Rn=se("URLSearchParams"),[Ln,An,Tn,_n]=["ReadableStream","Request","Response","Headers"].map(se),In=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ue(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let n,o;if(typeof e!="object"&&(e=[e]),Ee(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const a=s?Object.getOwnPropertyNames(e):Object.keys(e),i=a.length;let l;for(n=0;n<i;n++)l=a[n],t.call(null,e[l],l,e)}}function Kr(e,t){t=t.toLowerCase();const s=Object.keys(e);let n=s.length,o;for(;n-- >0;)if(o=s[n],t===o.toLowerCase())return o;return null}const pe=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Gr=e=>!_e(e)&&e!==pe;function Ot(){const{caseless:e}=Gr(this)&&this||{},t={},s=(n,o)=>{const a=e&&Kr(t,o)||o;Ye(t[a])&&Ye(n)?t[a]=Ot(t[a],n):Ye(n)?t[a]=Ot({},n):Ee(n)?t[a]=n.slice():t[a]=n};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&Ue(arguments[n],s);return t}const $n=(e,t,s,{allOwnKeys:n}={})=>(Ue(t,(o,a)=>{s&&Z(o)?e[a]=Wr(o,s):e[a]=o},{allOwnKeys:n}),e),Pn=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Mn=(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},Bn=(e,t,s,n)=>{let o,a,i;const l={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),a=o.length;a-- >0;)i=o[a],(!n||n(i,e,t))&&!l[i]&&(t[i]=e[i],l[i]=!0);e=s!==!1&&Qt(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},Un=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return n!==-1&&n===s},On=e=>{if(!e)return null;if(Ee(e))return e;let t=e.length;if(!qr(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},Dn=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Qt(Uint8Array)),zn=(e,t)=>{const n=(e&&e[lt]).call(e);let o;for(;(o=n.next())&&!o.done;){const a=o.value;t.call(e,a[0],a[1])}},Fn=(e,t)=>{let s;const n=[];for(;(s=e.exec(t))!==null;)n.push(s);return n},Vn=se("HTMLFormElement"),Hn=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,o){return n.toUpperCase()+o}),xr=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),Wn=se("RegExp"),Xr=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};Ue(s,(o,a)=>{let i;(i=t(o,a,e))!==!1&&(n[a]=i||o)}),Object.defineProperties(e,n)},Jn=e=>{Xr(e,(t,s)=>{if(Z(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=e[s];if(Z(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Yn=(e,t)=>{const s={},n=o=>{o.forEach(a=>{s[a]=!0})};return Ee(e)?n(e):n(String(e).split(t)),s},qn=()=>{},Kn=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Gn(e){return!!(e&&Z(e.append)&&e[Jr]==="FormData"&&e[lt])}const Xn=e=>{const t=new Array(10),s=(n,o)=>{if(ut(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[o]=n;const a=Ee(n)?[]:{};return Ue(n,(i,l)=>{const c=s(i,o+1);!_e(c)&&(a[l]=c)}),t[o]=void 0,a}}return n};return s(e,0)},Qn=se("AsyncFunction"),Zn=e=>e&&(ut(e)||Z(e))&&Z(e.then)&&Z(e.catch),Qr=((e,t)=>e?setImmediate:t?((s,n)=>(pe.addEventListener("message",({source:o,data:a})=>{o===pe&&a===s&&n.length&&n.shift()()},!1),o=>{n.push(o),pe.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Z(pe.postMessage)),eo=typeof queueMicrotask<"u"?queueMicrotask.bind(pe):typeof process<"u"&&process.nextTick||Qr,to=e=>e!=null&&Z(e[lt]),w={isArray:Ee,isArrayBuffer:Yr,isBuffer:bn,isFormData:En,isArrayBufferView:wn,isString:yn,isNumber:qr,isBoolean:vn,isObject:ut,isPlainObject:Ye,isReadableStream:Ln,isRequest:An,isResponse:Tn,isHeaders:_n,isUndefined:_e,isDate:jn,isFile:Nn,isBlob:Sn,isRegExp:Wn,isFunction:Z,isStream:Cn,isURLSearchParams:Rn,isTypedArray:Dn,isFileList:kn,forEach:Ue,merge:Ot,extend:$n,trim:In,stripBOM:Pn,inherits:Mn,toFlatObject:Bn,kindOf:ct,kindOfTest:se,endsWith:Un,toArray:On,forEachEntry:zn,matchAll:Fn,isHTMLForm:Vn,hasOwnProperty:xr,hasOwnProp:xr,reduceDescriptors:Xr,freezeMethods:Jn,toObjectSet:Yn,toCamelCase:Hn,noop:qn,toFiniteNumber:Kn,findKey:Kr,global:pe,isContextDefined:Gr,isSpecCompliantForm:Gn,toJSONObject:Xn,isAsyncFn:Qn,isThenable:Zn,setImmediate:Qr,asap:eo,isIterable:to};function P(e,t,s,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}w.inherits(P,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:w.toJSONObject(this.config),code:this.code,status:this.status}}});const Zr=P.prototype,es={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{es[e]={value:e}});Object.defineProperties(P,es);Object.defineProperty(Zr,"isAxiosError",{value:!0});P.from=(e,t,s,n,o,a)=>{const i=Object.create(Zr);return w.toFlatObject(e,i,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),P.call(i,e.message,t,s,n,o),i.cause=e,i.name=e.name,a&&Object.assign(i,a),i};const ro=null;function Dt(e){return w.isPlainObject(e)||w.isArray(e)}function ts(e){return w.endsWith(e,"[]")?e.slice(0,-2):e}function br(e,t,s){return e?e.concat(t).map(function(o,a){return o=ts(o),!s&&a?"["+o+"]":o}).join(s?".":""):t}function so(e){return w.isArray(e)&&!e.some(Dt)}const no=w.toFlatObject(w,{},null,function(t){return/^is[A-Z]/.test(t)});function ht(e,t,s){if(!w.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=w.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,m){return!w.isUndefined(m[h])});const n=s.metaTokens,o=s.visitor||u,a=s.dots,i=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&w.isSpecCompliantForm(t);if(!w.isFunction(o))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(w.isDate(g))return g.toISOString();if(w.isBoolean(g))return g.toString();if(!c&&w.isBlob(g))throw new P("Blob is not supported. Use a Buffer instead.");return w.isArrayBuffer(g)||w.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,h,m){let x=g;if(g&&!m&&typeof g=="object"){if(w.endsWith(h,"{}"))h=n?h:h.slice(0,-2),g=JSON.stringify(g);else if(w.isArray(g)&&so(g)||(w.isFileList(g)||w.endsWith(h,"[]"))&&(x=w.toArray(g)))return h=ts(h),x.forEach(function(v,S){!(w.isUndefined(v)||v===null)&&t.append(i===!0?br([h],S,a):i===null?h:h+"[]",d(v))}),!1}return Dt(g)?!0:(t.append(br(m,h,a),d(g)),!1)}const f=[],b=Object.assign(no,{defaultVisitor:u,convertValue:d,isVisitable:Dt});function p(g,h){if(!w.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+h.join("."));f.push(g),w.forEach(g,function(x,y){(!(w.isUndefined(x)||x===null)&&o.call(t,x,w.isString(y)?y.trim():y,h,b))===!0&&p(x,h?h.concat(y):[y])}),f.pop()}}if(!w.isObject(e))throw new TypeError("data must be an object");return p(e),t}function wr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Zt(e,t){this._pairs=[],e&&ht(e,this,t)}const rs=Zt.prototype;rs.append=function(t,s){this._pairs.push([t,s])};rs.toString=function(t){const s=t?function(n){return t.call(this,n,wr)}:wr;return this._pairs.map(function(o){return s(o[0])+"="+s(o[1])},"").join("&")};function oo(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ss(e,t,s){if(!t)return e;const n=s&&s.encode||oo;w.isFunction(s)&&(s={serialize:s});const o=s&&s.serialize;let a;if(o?a=o(t,s):a=w.isURLSearchParams(t)?t.toString():new Zt(t,s).toString(n),a){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class ao{constructor(){this.handlers=[]}use(t,s,n){return this.handlers.push({fulfilled:t,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){w.forEach(this.handlers,function(n){n!==null&&t(n)})}}const yr=ao,ns={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},io=typeof URLSearchParams<"u"?URLSearchParams:Zt,lo=typeof FormData<"u"?FormData:null,co=typeof Blob<"u"?Blob:null,uo={isBrowser:!0,classes:{URLSearchParams:io,FormData:lo,Blob:co},protocols:["http","https","file","blob","url","data"]},er=typeof window<"u"&&typeof document<"u",zt=typeof navigator=="object"&&navigator||void 0,ho=er&&(!zt||["ReactNative","NativeScript","NS"].indexOf(zt.product)<0),mo=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),fo=er&&window.location.href||"http://localhost",go=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:er,hasStandardBrowserEnv:ho,hasStandardBrowserWebWorkerEnv:mo,navigator:zt,origin:fo},Symbol.toStringTag,{value:"Module"})),X={...go,...uo};function po(e,t){return ht(e,new X.classes.URLSearchParams,Object.assign({visitor:function(s,n,o,a){return X.isNode&&w.isBuffer(s)?(this.append(n,s.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function xo(e){return w.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function bo(e){const t={},s=Object.keys(e);let n;const o=s.length;let a;for(n=0;n<o;n++)a=s[n],t[a]=e[a];return t}function os(e){function t(s,n,o,a){let i=s[a++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=a>=s.length;return i=!i&&w.isArray(o)?o.length:i,c?(w.hasOwnProp(o,i)?o[i]=[o[i],n]:o[i]=n,!l):((!o[i]||!w.isObject(o[i]))&&(o[i]=[]),t(s,n,o[i],a)&&w.isArray(o[i])&&(o[i]=bo(o[i])),!l)}if(w.isFormData(e)&&w.isFunction(e.entries)){const s={};return w.forEachEntry(e,(n,o)=>{t(xo(n),o,s,0)}),s}return null}function wo(e,t,s){if(w.isString(e))try{return(t||JSON.parse)(e),w.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(e)}const tr={transitional:ns,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const n=s.getContentType()||"",o=n.indexOf("application/json")>-1,a=w.isObject(t);if(a&&w.isHTMLForm(t)&&(t=new FormData(t)),w.isFormData(t))return o?JSON.stringify(os(t)):t;if(w.isArrayBuffer(t)||w.isBuffer(t)||w.isStream(t)||w.isFile(t)||w.isBlob(t)||w.isReadableStream(t))return t;if(w.isArrayBufferView(t))return t.buffer;if(w.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return po(t,this.formSerializer).toString();if((l=w.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ht(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||o?(s.setContentType("application/json",!1),wo(t)):t}],transformResponse:[function(t){const s=this.transitional||tr.transitional,n=s&&s.forcedJSONParsing,o=this.responseType==="json";if(w.isResponse(t)||w.isReadableStream(t))return t;if(t&&w.isString(t)&&(n&&!this.responseType||o)){const i=!(s&&s.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(l){if(i)throw l.name==="SyntaxError"?P.from(l,P.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:X.classes.FormData,Blob:X.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};w.forEach(["delete","get","head","post","put","patch"],e=>{tr.headers[e]={}});const rr=tr,yo=w.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vo=e=>{const t={};let s,n,o;return e&&e.split(`
`).forEach(function(i){o=i.indexOf(":"),s=i.substring(0,o).trim().toLowerCase(),n=i.substring(o+1).trim(),!(!s||t[s]&&yo[s])&&(s==="set-cookie"?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t},vr=Symbol("internals");function Ae(e){return e&&String(e).trim().toLowerCase()}function qe(e){return e===!1||e==null?e:w.isArray(e)?e.map(qe):String(e)}function jo(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}const No=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Et(e,t,s,n,o){if(w.isFunction(n))return n.call(this,t,s);if(o&&(t=s),!!w.isString(t)){if(w.isString(n))return t.indexOf(n)!==-1;if(w.isRegExp(n))return n.test(t)}}function So(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,n)=>s.toUpperCase()+n)}function ko(e,t){const s=w.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(o,a,i){return this[n].call(this,t,o,a,i)},configurable:!0})})}class mt{constructor(t){t&&this.set(t)}set(t,s,n){const o=this;function a(l,c,d){const u=Ae(c);if(!u)throw new Error("header name must be a non-empty string");const f=w.findKey(o,u);(!f||o[f]===void 0||d===!0||d===void 0&&o[f]!==!1)&&(o[f||c]=qe(l))}const i=(l,c)=>w.forEach(l,(d,u)=>a(d,u,c));if(w.isPlainObject(t)||t instanceof this.constructor)i(t,s);else if(w.isString(t)&&(t=t.trim())&&!No(t))i(vo(t),s);else if(w.isObject(t)&&w.isIterable(t)){let l={},c,d;for(const u of t){if(!w.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?w.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}i(l,s)}else t!=null&&a(s,t,n);return this}get(t,s){if(t=Ae(t),t){const n=w.findKey(this,t);if(n){const o=this[n];if(!s)return o;if(s===!0)return jo(o);if(w.isFunction(s))return s.call(this,o,n);if(w.isRegExp(s))return s.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=Ae(t),t){const n=w.findKey(this,t);return!!(n&&this[n]!==void 0&&(!s||Et(this,this[n],n,s)))}return!1}delete(t,s){const n=this;let o=!1;function a(i){if(i=Ae(i),i){const l=w.findKey(n,i);l&&(!s||Et(n,n[l],l,s))&&(delete n[l],o=!0)}}return w.isArray(t)?t.forEach(a):a(t),o}clear(t){const s=Object.keys(this);let n=s.length,o=!1;for(;n--;){const a=s[n];(!t||Et(this,this[a],a,t,!0))&&(delete this[a],o=!0)}return o}normalize(t){const s=this,n={};return w.forEach(this,(o,a)=>{const i=w.findKey(n,a);if(i){s[i]=qe(o),delete s[a];return}const l=t?So(a):String(a).trim();l!==a&&delete s[a],s[l]=qe(o),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return w.forEach(this,(n,o)=>{n!=null&&n!==!1&&(s[o]=t&&w.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const n=new this(t);return s.forEach(o=>n.set(o)),n}static accessor(t){const n=(this[vr]=this[vr]={accessors:{}}).accessors,o=this.prototype;function a(i){const l=Ae(i);n[l]||(ko(o,i),n[l]=!0)}return w.isArray(t)?t.forEach(a):a(t),this}}mt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);w.reduceDescriptors(mt.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[s]=n}}});w.freezeMethods(mt);const re=mt;function Rt(e,t){const s=this||rr,n=t||s,o=re.from(n.headers);let a=n.data;return w.forEach(e,function(l){a=l.call(s,a,o.normalize(),t?t.status:void 0)}),o.normalize(),a}function as(e){return!!(e&&e.__CANCEL__)}function Re(e,t,s){P.call(this,e??"canceled",P.ERR_CANCELED,t,s),this.name="CanceledError"}w.inherits(Re,P,{__CANCEL__:!0});function is(e,t,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):t(new P("Request failed with status code "+s.status,[P.ERR_BAD_REQUEST,P.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Co(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Eo(e,t){e=e||10;const s=new Array(e),n=new Array(e);let o=0,a=0,i;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[a];i||(i=d),s[o]=c,n[o]=d;let f=a,b=0;for(;f!==o;)b+=s[f++],f=f%e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),d-i<t)return;const p=u&&d-u;return p?Math.round(b*1e3/p):void 0}}function Ro(e,t){let s=0,n=1e3/t,o,a;const i=(d,u=Date.now())=>{s=u,o=null,a&&(clearTimeout(a),a=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),f=u-s;f>=n?i(d,u):(o=d,a||(a=setTimeout(()=>{a=null,i(o)},n-f)))},()=>o&&i(o)]}const Xe=(e,t,s=3)=>{let n=0;const o=Eo(50,250);return Ro(a=>{const i=a.loaded,l=a.lengthComputable?a.total:void 0,c=i-n,d=o(c),u=i<=l;n=i;const f={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-i)/d:void 0,event:a,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},s)},jr=(e,t)=>{const s=e!=null;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},Nr=e=>(...t)=>w.asap(()=>e(...t)),Lo=X.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,X.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(X.origin),X.navigator&&/(msie|trident)/i.test(X.navigator.userAgent)):()=>!0,Ao=X.hasStandardBrowserEnv?{write(e,t,s,n,o,a){const i=[e+"="+encodeURIComponent(t)];w.isNumber(s)&&i.push("expires="+new Date(s).toGMTString()),w.isString(n)&&i.push("path="+n),w.isString(o)&&i.push("domain="+o),a===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function To(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function _o(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ls(e,t,s){let n=!To(t);return e&&(n||s==!1)?_o(e,t):t}const Sr=e=>e instanceof re?{...e}:e;function xe(e,t){t=t||{};const s={};function n(d,u,f,b){return w.isPlainObject(d)&&w.isPlainObject(u)?w.merge.call({caseless:b},d,u):w.isPlainObject(u)?w.merge({},u):w.isArray(u)?u.slice():u}function o(d,u,f,b){if(w.isUndefined(u)){if(!w.isUndefined(d))return n(void 0,d,f,b)}else return n(d,u,f,b)}function a(d,u){if(!w.isUndefined(u))return n(void 0,u)}function i(d,u){if(w.isUndefined(u)){if(!w.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,f){if(f in t)return n(d,u);if(f in e)return n(void 0,d)}const c={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,u,f)=>o(Sr(d),Sr(u),f,!0)};return w.forEach(Object.keys(Object.assign({},e,t)),function(u){const f=c[u]||o,b=f(e[u],t[u],u);w.isUndefined(b)&&f!==l||(s[u]=b)}),s}const cs=e=>{const t=xe({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:a,headers:i,auth:l}=t;t.headers=i=re.from(i),t.url=ss(ls(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(w.isFormData(s)){if(X.hasStandardBrowserEnv||X.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[d,...u]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...u].join("; "))}}if(X.hasStandardBrowserEnv&&(n&&w.isFunction(n)&&(n=n(t)),n||n!==!1&&Lo(t.url))){const d=o&&a&&Ao.read(a);d&&i.set(o,d)}return t},Io=typeof XMLHttpRequest<"u",$o=Io&&function(e){return new Promise(function(s,n){const o=cs(e);let a=o.data;const i=re.from(o.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=o,u,f,b,p,g;function h(){p&&p(),g&&g(),o.cancelToken&&o.cancelToken.unsubscribe(u),o.signal&&o.signal.removeEventListener("abort",u)}let m=new XMLHttpRequest;m.open(o.method.toUpperCase(),o.url,!0),m.timeout=o.timeout;function x(){if(!m)return;const v=re.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),R={data:!l||l==="text"||l==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:v,config:e,request:m};is(function(E){s(E),h()},function(E){n(E),h()},R),m=null}"onloadend"in m?m.onloadend=x:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(x)},m.onabort=function(){m&&(n(new P("Request aborted",P.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new P("Network Error",P.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let S=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const R=o.transitional||ns;o.timeoutErrorMessage&&(S=o.timeoutErrorMessage),n(new P(S,R.clarifyTimeoutError?P.ETIMEDOUT:P.ECONNABORTED,e,m)),m=null},a===void 0&&i.setContentType(null),"setRequestHeader"in m&&w.forEach(i.toJSON(),function(S,R){m.setRequestHeader(R,S)}),w.isUndefined(o.withCredentials)||(m.withCredentials=!!o.withCredentials),l&&l!=="json"&&(m.responseType=o.responseType),d&&([b,g]=Xe(d,!0),m.addEventListener("progress",b)),c&&m.upload&&([f,p]=Xe(c),m.upload.addEventListener("progress",f),m.upload.addEventListener("loadend",p)),(o.cancelToken||o.signal)&&(u=v=>{m&&(n(!v||v.type?new Re(null,e,m):v),m.abort(),m=null)},o.cancelToken&&o.cancelToken.subscribe(u),o.signal&&(o.signal.aborted?u():o.signal.addEventListener("abort",u)));const y=Co(o.url);if(y&&X.protocols.indexOf(y)===-1){n(new P("Unsupported protocol "+y+":",P.ERR_BAD_REQUEST,e));return}m.send(a||null)})},Po=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let n=new AbortController,o;const a=function(d){if(!o){o=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof P?u:new Re(u instanceof Error?u.message:u))}};let i=t&&setTimeout(()=>{i=null,a(new P(`timeout ${t} of ms exceeded`,P.ETIMEDOUT))},t);const l=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),e=null)};e.forEach(d=>d.addEventListener("abort",a));const{signal:c}=n;return c.unsubscribe=()=>w.asap(l),c}},Mo=Po,Bo=function*(e,t){let s=e.byteLength;if(!t||s<t){yield e;return}let n=0,o;for(;n<s;)o=n+t,yield e.slice(n,o),n=o},Uo=async function*(e,t){for await(const s of Oo(e))yield*Bo(s,t)},Oo=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:n}=await t.read();if(s)break;yield n}}finally{await t.cancel()}},kr=(e,t,s,n)=>{const o=Uo(e,t);let a=0,i,l=c=>{i||(i=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await o.next();if(d){l(),c.close();return}let f=u.byteLength;if(s){let b=a+=f;s(b)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),o.return()}},{highWaterMark:2})},ft=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ds=ft&&typeof ReadableStream=="function",Do=ft&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),us=(e,...t)=>{try{return!!e(...t)}catch{return!1}},zo=ds&&us(()=>{let e=!1;const t=new Request(X.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Cr=64*1024,Ft=ds&&us(()=>w.isReadableStream(new Response("").body)),Qe={stream:Ft&&(e=>e.body)};ft&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Qe[t]&&(Qe[t]=w.isFunction(e[t])?s=>s[t]():(s,n)=>{throw new P(`Response type '${t}' is not supported`,P.ERR_NOT_SUPPORT,n)})})})(new Response);const Fo=async e=>{if(e==null)return 0;if(w.isBlob(e))return e.size;if(w.isSpecCompliantForm(e))return(await new Request(X.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(w.isArrayBufferView(e)||w.isArrayBuffer(e))return e.byteLength;if(w.isURLSearchParams(e)&&(e=e+""),w.isString(e))return(await Do(e)).byteLength},Vo=async(e,t)=>{const s=w.toFiniteNumber(e.getContentLength());return s??Fo(t)},Ho=ft&&(async e=>{let{url:t,method:s,data:n,signal:o,cancelToken:a,timeout:i,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:f="same-origin",fetchOptions:b}=cs(e);d=d?(d+"").toLowerCase():"text";let p=Mo([o,a&&a.toAbortSignal()],i),g;const h=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let m;try{if(c&&zo&&s!=="get"&&s!=="head"&&(m=await Vo(u,n))!==0){let R=new Request(t,{method:"POST",body:n,duplex:"half"}),j;if(w.isFormData(n)&&(j=R.headers.get("content-type"))&&u.setContentType(j),R.body){const[E,L]=jr(m,Xe(Nr(c)));n=kr(R.body,Cr,E,L)}}w.isString(f)||(f=f?"include":"omit");const x="credentials"in Request.prototype;g=new Request(t,{...b,signal:p,method:s.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:x?f:void 0});let y=await fetch(g,b);const v=Ft&&(d==="stream"||d==="response");if(Ft&&(l||v&&h)){const R={};["status","statusText","headers"].forEach(k=>{R[k]=y[k]});const j=w.toFiniteNumber(y.headers.get("content-length")),[E,L]=l&&jr(j,Xe(Nr(l),!0))||[];y=new Response(kr(y.body,Cr,E,()=>{L&&L(),h&&h()}),R)}d=d||"text";let S=await Qe[w.findKey(Qe,d)||"text"](y,e);return!v&&h&&h(),await new Promise((R,j)=>{is(R,j,{data:S,headers:re.from(y.headers),status:y.status,statusText:y.statusText,config:e,request:g})})}catch(x){throw h&&h(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new P("Network Error",P.ERR_NETWORK,e,g),{cause:x.cause||x}):P.from(x,x&&x.code,e,g)}}),Vt={http:ro,xhr:$o,fetch:Ho};w.forEach(Vt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Er=e=>`- ${e}`,Wo=e=>w.isFunction(e)||e===null||e===!1,hs={getAdapter:e=>{e=w.isArray(e)?e:[e];const{length:t}=e;let s,n;const o={};for(let a=0;a<t;a++){s=e[a];let i;if(n=s,!Wo(s)&&(n=Vt[(i=String(s)).toLowerCase()],n===void 0))throw new P(`Unknown adapter '${i}'`);if(n)break;o[i||"#"+a]=n}if(!n){const a=Object.entries(o).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=t?a.length>1?`since :
`+a.map(Er).join(`
`):" "+Er(a[0]):"as no adapter specified";throw new P("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:Vt};function Lt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Re(null,e)}function Rr(e){return Lt(e),e.headers=re.from(e.headers),e.data=Rt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),hs.getAdapter(e.adapter||rr.adapter)(e).then(function(n){return Lt(e),n.data=Rt.call(e,e.transformResponse,n),n.headers=re.from(n.headers),n},function(n){return as(n)||(Lt(e),n&&n.response&&(n.response.data=Rt.call(e,e.transformResponse,n.response),n.response.headers=re.from(n.response.headers))),Promise.reject(n)})}const ms="1.10.0",gt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{gt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Lr={};gt.transitional=function(t,s,n){function o(a,i){return"[Axios v"+ms+"] Transitional option '"+a+"'"+i+(n?". "+n:"")}return(a,i,l)=>{if(t===!1)throw new P(o(i," has been removed"+(s?" in "+s:"")),P.ERR_DEPRECATED);return s&&!Lr[i]&&(Lr[i]=!0,console.warn(o(i," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(a,i,l):!0}};gt.spelling=function(t){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Jo(e,t,s){if(typeof e!="object")throw new P("options must be an object",P.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const a=n[o],i=t[a];if(i){const l=e[a],c=l===void 0||i(l,a,e);if(c!==!0)throw new P("option "+a+" must be "+c,P.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new P("Unknown option "+a,P.ERR_BAD_OPTION)}}const Ke={assertOptions:Jo,validators:gt},oe=Ke.validators;class Ze{constructor(t){this.defaults=t||{},this.interceptors={request:new yr,response:new yr}}async request(t,s){try{return await this._request(t,s)}catch(n){if(n instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=xe(this.defaults,s);const{transitional:n,paramsSerializer:o,headers:a}=s;n!==void 0&&Ke.assertOptions(n,{silentJSONParsing:oe.transitional(oe.boolean),forcedJSONParsing:oe.transitional(oe.boolean),clarifyTimeoutError:oe.transitional(oe.boolean)},!1),o!=null&&(w.isFunction(o)?s.paramsSerializer={serialize:o}:Ke.assertOptions(o,{encode:oe.function,serialize:oe.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Ke.assertOptions(s,{baseUrl:oe.spelling("baseURL"),withXsrfToken:oe.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let i=a&&w.merge(a.common,a[s.method]);a&&w.forEach(["delete","get","head","post","put","patch","common"],g=>{delete a[g]}),s.headers=re.concat(i,a);const l=[];let c=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(s)===!1||(c=c&&h.synchronous,l.unshift(h.fulfilled,h.rejected))});const d=[];this.interceptors.response.forEach(function(h){d.push(h.fulfilled,h.rejected)});let u,f=0,b;if(!c){const g=[Rr.bind(this),void 0];for(g.unshift.apply(g,l),g.push.apply(g,d),b=g.length,u=Promise.resolve(s);f<b;)u=u.then(g[f++],g[f++]);return u}b=l.length;let p=s;for(f=0;f<b;){const g=l[f++],h=l[f++];try{p=g(p)}catch(m){h.call(this,m);break}}try{u=Rr.call(this,p)}catch(g){return Promise.reject(g)}for(f=0,b=d.length;f<b;)u=u.then(d[f++],d[f++]);return u}getUri(t){t=xe(this.defaults,t);const s=ls(t.baseURL,t.url,t.allowAbsoluteUrls);return ss(s,t.params,t.paramsSerializer)}}w.forEach(["delete","get","head","options"],function(t){Ze.prototype[t]=function(s,n){return this.request(xe(n||{},{method:t,url:s,data:(n||{}).data}))}});w.forEach(["post","put","patch"],function(t){function s(n){return function(a,i,l){return this.request(xe(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}Ze.prototype[t]=s(),Ze.prototype[t+"Form"]=s(!0)});const Ge=Ze;class sr{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(a){s=a});const n=this;this.promise.then(o=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](o);n._listeners=null}),this.promise.then=o=>{let a;const i=new Promise(l=>{n.subscribe(l),a=l}).then(o);return i.cancel=function(){n.unsubscribe(a)},i},t(function(a,i,l){n.reason||(n.reason=new Re(a,i,l),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=n=>{t.abort(n)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new sr(function(o){t=o}),cancel:t}}}const Yo=sr;function qo(e){return function(s){return e.apply(null,s)}}function Ko(e){return w.isObject(e)&&e.isAxiosError===!0}const Ht={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ht).forEach(([e,t])=>{Ht[t]=e});const Go=Ht;function fs(e){const t=new Ge(e),s=Wr(Ge.prototype.request,t);return w.extend(s,Ge.prototype,t,{allOwnKeys:!0}),w.extend(s,t,null,{allOwnKeys:!0}),s.create=function(o){return fs(xe(e,o))},s}const W=fs(rr);W.Axios=Ge;W.CanceledError=Re;W.CancelToken=Yo;W.isCancel=as;W.VERSION=ms;W.toFormData=ht;W.AxiosError=P;W.Cancel=W.CanceledError;W.all=function(t){return Promise.all(t)};W.spread=qo;W.isAxiosError=Ko;W.mergeConfig=xe;W.AxiosHeaders=re;W.formToJSON=e=>os(w.isHTMLForm(e)?new FormData(e):e);W.getAdapter=hs.getAdapter;W.HttpStatusCode=Go;W.default=W;const gs=W,Ar="4bf253f4685945a5b0c15b8580c167cb",At=()=>{if({}.VITE_SPOTIFY_REDIRECT_URI)return{}.VITE_SPOTIFY_REDIRECT_URI;if(typeof window<"u"){const{protocol:e,hostname:t}=window.location;return`${e}//${t}/callback`}if(typeof window<"u"){const{protocol:e,hostname:t,port:s}=window.location;return t==="localhost"||t==="127.0.0.1"?`${e}//${t}:${s||"5173"}/callback`:`${e}//${t}/callback`}throw new Error("本番環境では VITE_SPOTIFY_REDIRECT_URI を設定してください")},ye="https://api.spotify.com/v1",Xo="https://accounts.spotify.com/authorize",Qo="https://accounts.spotify.com/api/token",Zo=["user-read-private","user-read-email"].join(" ");function ea(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=new Uint8Array(128);return crypto.getRandomValues(s),Array.from(s,o=>e[o%e.length]).join("")}async function ta(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s);return btoa(String.fromCharCode(...new Uint8Array(n))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const ps={getCurrentRedirectUri:()=>At(),getAuthUrl:async()=>{const e=ea(),t=await ta(e),s=At(),n=sa(32),o=Date.now(),a={codeVerifier:e,timestamp:o,state:n};localStorage.setItem(`spotify_auth_${n}`,JSON.stringify(a)),localStorage.setItem("spotify_current_state",n);const i=new URLSearchParams({client_id:Ar,response_type:"code",redirect_uri:s,scope:Zo,code_challenge_method:"S256",code_challenge:t,state:n});return`${Xo}?${i.toString()}`},getAccessToken:async(e,t)=>{if(!t){const c=localStorage.getItem("spotify_current_state");c&&(t=c)}let s=null,n=null;if(t){const c=localStorage.getItem(`spotify_auth_${t}`);if(c)try{const d=JSON.parse(c);s=d.codeVerifier,n=d.timestamp,console.log("✅ State対応認証データ取得成功:",{state:t.substring(0,10)+"...",hasCodeVerifier:!!s,作成時刻:n?new Date(n).toLocaleTimeString():"unknown"})}catch(d){console.error("❌ 認証データ解析エラー:",d)}}if(!s){s=localStorage.getItem("spotify_code_verifier");const c=localStorage.getItem("spotify_code_verifier_timestamp");c&&(n=parseInt(c)),s&&console.log("⚠️ フォールバック: 古い方式でcode_verifier取得")}if(!s)throw new Error("Code verifier not found - 認証を最初からやり直してください");if(n){const c=Date.now(),d=Math.floor((c-n)/6e4);console.log("🕐 Code Verifier時間確認:",{作成時刻:new Date(n).toLocaleTimeString(),現在時刻:new Date(c).toLocaleTimeString(),経過時間:`${d}分`,制限時間:"10分"}),d>10&&console.warn("⚠️ Code Verifierが10分以上経過しています")}const o=At(),a={grant_type:"authorization_code",code:e,redirect_uri:o,client_id:Ar,code_verifier:s};console.log("🔄 トークン交換リクエスト開始..."),console.log(`   Redirect URI: ${o}`),console.log("   Client ID: 設定済み"),console.log(`   認証コード: ${e.substring(0,10)}...`),console.log(`   Code Verifier: ${s?"設定済み":"❌ 未設定"}`),console.log(`   Code Verifier長さ: ${s?s.length:0}`),console.log(`   Code Verifier先頭: ${s?s.substring(0,15)+"...":"なし"}`);const i=await fetch(Qo,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(a)});if(t&&localStorage.removeItem(`spotify_auth_${t}`),localStorage.removeItem("spotify_current_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_code_verifier_timestamp"),!i.ok){t&&localStorage.removeItem(`spotify_auth_${t}`),localStorage.removeItem("spotify_current_state"),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_code_verifier_timestamp");let c="Unknown error";try{const d=await i.json();c=JSON.stringify(d,null,2),console.error("❌ Token exchange失敗:",d)}catch{console.error("❌ Token exchange失敗: レスポンス解析エラー")}throw new Error(`Failed to get access token: ${i.status} - ${c}`)}const l=await i.json();return console.log("✅ Token exchange成功!"),l.access_token}},ce={buildOptimizedQuery:(e,t="track")=>{let s=e.trim();return/[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]/.test(s)||t==="track"&&s.includes(" ")&&!s.includes("track:")&&!s.includes("artist:")&&s.split(" ").length>=2,s},searchAlbums:async(e,t,s=10)=>{var c;const n=ce.buildOptimizedQuery(e,"album"),a=/[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]/.test(e)?"&market=JP":"",i=await fetch(`${ye}/search?q=${encodeURIComponent(n)}&type=album&limit=${s}${a}`,{headers:{Authorization:`Bearer ${t}`}});if(!i.ok){const d=await i.json().catch(()=>({}));throw new Error(`Failed to search albums: ${i.status} ${((c=d.error)==null?void 0:c.message)||""}`)}return(await i.json()).albums.items.map(d=>{var u,f;return{id:d.id,name:d.name,artist:((u=d.artists[0])==null?void 0:u.name)||"Unknown Artist",image:((f=d.images[0])==null?void 0:f.url)||null,releaseDate:d.release_date,totalTracks:d.total_tracks,spotifyUrl:d.external_urls.spotify}})},searchTracks:async(e,t,s=10)=>{var c;const n=ce.buildOptimizedQuery(e,"track"),a=/[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]/.test(e)?"&market=JP":"",i=await fetch(`${ye}/search?q=${encodeURIComponent(n)}&type=track&limit=${s}${a}`,{headers:{Authorization:`Bearer ${t}`}});if(!i.ok){const d=await i.json().catch(()=>({}));throw new Error(`Failed to search tracks: ${i.status} ${((c=d.error)==null?void 0:c.message)||""}`)}return(await i.json()).tracks.items.map(d=>{var u,f,b,p;return{id:d.id,name:d.name,artist:((u=d.artists[0])==null?void 0:u.name)||"Unknown Artist",album:((f=d.album)==null?void 0:f.name)||"Unknown Album",image:((p=(b=d.album)==null?void 0:b.images[0])==null?void 0:p.url)||null,duration:d.duration_ms,previewUrl:d.preview_url,spotifyUrl:d.external_urls.spotify}})},searchTracksAdvanced:async(e,t,s,n=5)=>{const a=/[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]/.test(e+t)?"&market=JP":"",i=`track:"${e}" artist:"${t}"`,l=await fetch(`${ye}/search?q=${encodeURIComponent(i)}&type=track&limit=${n}${a}`,{headers:{Authorization:`Bearer ${s}`}});if(!l.ok){const d=`${e} ${t}`;return ce.searchTracks(d,s,n)}return(await l.json()).tracks.items.map(d=>{var u,f,b,p;return{id:d.id,name:d.name,artist:((u=d.artists[0])==null?void 0:u.name)||"Unknown Artist",album:((f=d.album)==null?void 0:f.name)||"Unknown Album",image:((p=(b=d.album)==null?void 0:b.images[0])==null?void 0:p.url)||null,duration:d.duration_ms,previewUrl:d.preview_url,spotifyUrl:d.external_urls.spotify}})},searchArtists:async(e,t,s=10)=>{const n=await fetch(`${ye}/search?q=${encodeURIComponent(e)}&type=artist&limit=${s}`,{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error("Failed to search artists");return(await n.json()).artists.items.map(a=>{var i,l;return{id:a.id,name:a.name,image:((i=a.images[0])==null?void 0:i.url)||null,followers:((l=a.followers)==null?void 0:l.total)||0,genres:a.genres||[],spotifyUrl:a.external_urls.spotify}})}},ra={getPreviewUrl:(e,t)=>`${ye}/tracks/${e}`,getUserPlaylists:async e=>{const t=await fetch(`${ye}/me/playlists`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to get playlists");return(await t.json()).items.map(n=>{var o;return{id:n.id,name:n.name,description:n.description,image:((o=n.images[0])==null?void 0:o.url)||null,tracksCount:n.tracks.total,spotifyUrl:n.external_urls.spotify}})}};function sa(e){if(typeof crypto<"u"&&crypto.getRandomValues){const n=new Uint32Array(e);crypto.getRandomValues(n);const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array.from(n,a=>o[a%o.length]).join("")}const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let s="";for(let n=0;n<e;n++)s+=t.charAt(Math.floor(Math.random()*t.length));return s}const na=Object.freeze(Object.defineProperty({__proto__:null,spotifyAuth:ps,spotifyPreview:ra,spotifySearch:ce},Symbol.toStringTag,{value:"Module"}));let nr=[];const Tt=()=>nr,oa=()=>{nr=[]},ae=(e,t,s,n)=>{const o={provider:e,success:t,error:s,fallbackReason:n,timestamp:Date.now()};nr.push(o),t?console.log(`✅ ${e.toUpperCase()}検索成功`):(console.error(`❌ ${e.toUpperCase()}検索失敗:`,s),n&&console.warn(`🔄 フォールバック理由: ${n}`))};let G="spotify";const xs=e=>{G=e,console.log(`🔄 音楽検索プロバイダーを ${e.toUpperCase()} に切り替えました`)},_t=()=>G,bs="abfe3677d7f2a1b357dc58df96ede541",ws="https://ws.audioscrobbler.com/2.0/",ys="4bf253f4685945a5b0c15b8580c167cb",et=e=>!!(e&&e.trim()!==""&&!e.includes("2a96cbd8b46e442fc41c2b86b821562f"));let de=null;const aa=()=>{const e=localStorage.getItem("spotify_access_token");e&&(de=e,console.log("Spotify トークンをローカルストレージから復元しました"),xs("spotify"))};aa();const vs=e=>{de=e,localStorage.setItem("spotify_access_token",e),console.log("Spotify アクセストークンが設定されました")},ia=()=>{de=null,localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_refresh_token"),localStorage.removeItem("spotify_token_expires"),console.log("Spotify アクセストークンを削除しました")};async function la(){const e=localStorage.getItem("spotify_refresh_token");if(!e)throw new Error("リフレッシュトークンがありません");const t=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Basic ${btoa(`${ys}:${{}.VITE_SPOTIFY_CLIENT_SECRET||""}`)}`},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})});if(!t.ok){const n=await t.json();throw new Error(`Token refresh failed: ${n.error_description||n.error}`)}const s=await t.json();return vs(s.access_token),localStorage.setItem("spotify_token_expires",(Date.now()+s.expires_in*1e3).toString()),s.refresh_token&&localStorage.setItem("spotify_refresh_token",s.refresh_token),console.log("✅ Spotifyトークンをリフレッシュしました"),s.access_token}async function ca(){if(!de)return console.log("❌ アクセストークンが設定されていません"),null;const e=localStorage.getItem("spotify_token_expires");if(!e)return console.log("❌ トークンの有効期限情報がありません"),de;const t=Date.now(),s=parseInt(e);if(t>=s-5*60*1e3){console.log("🔄 トークンの有効期限が近いため、リフレッシュします");try{return await la()}catch(n){return console.error("❌ トークンリフレッシュに失敗:",n),ia(),null}}return de}const Tr=async e=>{var s,n,o,a,i;oa();const t=await ca();if(!t){const l="Spotify アクセストークンが設定されていないか、リフレッシュに失敗しました";return ae("spotify",!1,l,`${l}。Last.fmにフォールバックします。`),tt(e)}try{const l=[],c=e.trim().split(/\s+/),d=c.length>=2,u=await ce.searchTracks(e,t,7),f=await ce.searchAlbums(e,t,3);let b=[];if(d&&c.length<=4)try{const g=c.slice(0,Math.ceil(c.length/2)).join(" "),h=c.slice(Math.ceil(c.length/2)).join(" ");b=await ce.searchTracksAdvanced(g,h,t,3)}catch(g){console.log("Spotify詳細検索失敗（通常の検索結果を使用）:",g)}const p=new Set;return b.forEach(g=>{p.has(g.id)||(l.push({name:g.name,artist:g.artist,image:g.image||void 0,url:g.spotifyUrl,isGeneratedImage:!g.image,provider:"spotify",id:g.id}),p.add(g.id))}),u.forEach(g=>{p.has(g.id)||(l.push({name:g.name,artist:g.artist,image:g.image||void 0,url:g.spotifyUrl,isGeneratedImage:!g.image,provider:"spotify",id:g.id}),p.add(g.id))}),f.forEach(g=>{p.has(g.id)||(l.push({name:g.name,artist:g.artist,image:g.image||void 0,url:g.spotifyUrl,isGeneratedImage:!g.image,provider:"spotify",id:g.id}),p.add(g.id))}),ae("spotify",!0),console.log(`Spotify検索完了: ${l.length}件の結果`),l.slice(0,10)}catch(l){const c=((o=(n=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:n.error)==null?void 0:o.message)||(l==null?void 0:l.message)||"Spotify API呼び出しに失敗しました",d=(a=l==null?void 0:l.response)==null?void 0:a.status,u=d?`HTTP ${d}: ${c}`:c;return ae("spotify",!1,u,"Spotify検索でエラーが発生したため、Last.fmにフォールバックします"),console.error("Spotify検索エラー詳細:",{status:d,message:c,response:(i=l==null?void 0:l.response)==null?void 0:i.data,error:l}),tt(e)}},tt=async e=>{var t,s,n,o,a,i;try{const l=e.trim();console.log(`Last.fm検索実行: "${l}"`);const d=((s=(t=(await gs.get(ws,{params:{method:"track.search",track:l,api_key:bs,format:"json",limit:15}})).data.results)==null?void 0:t.trackmatches)==null?void 0:s.track)||[];return ae("lastfm",!0),console.log(`Last.fm検索結果: ${d.length}件`),Array.isArray(d)?d.map(u=>{var p,g,h,m,x,y;const f=((g=(p=u.image)==null?void 0:p[3])==null?void 0:g["#text"])||((m=(h=u.image)==null?void 0:h[2])==null?void 0:m["#text"])||((y=(x=u.image)==null?void 0:x[1])==null?void 0:y["#text"])||"",b=or(u.name,u.artist);return{name:u.name,artist:u.artist,image:et(f)?f:b.image,url:u.url,isGeneratedImage:!et(f),provider:"lastfm"}}):(ae("lastfm",!1,"Last.fm APIの応答形式が予期しない形式です","レスポンスデータの構造が変更された可能性があります"),[])}catch(l){const c=((o=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:o.message)||(l==null?void 0:l.message)||"Last.fm API呼び出しに失敗しました",d=(a=l==null?void 0:l.response)==null?void 0:a.status,u=d?`HTTP ${d}: ${c}`:c;return ae("lastfm",!1,u,"Last.fm APIでエラーが発生しました"),console.error("Last.fm検索エラー詳細:",{status:d,message:c,response:(i=l==null?void 0:l.response)==null?void 0:i.data,error:l}),[]}},da=async e=>{const t=Ns();if(t.includes(G))try{switch(G){case"spotify":return await _r(e);case"lastfm":return await rt(e);default:throw new Error(`未サポートのプロバイダー: ${G}`)}}catch(s){console.error(`${G}アルバム検索エラー:`,s)}for(const s of t)if(s!==G)try{switch(s){case"spotify":return await _r(e);case"lastfm":return await rt(e)}}catch(n){console.error(`${s}アルバム検索フォールバック失敗:`,n)}return[]},or=(e,t)=>({image:`https://picsum.photos/300/300?random=${Math.floor(Math.random()*1e3)}`,isGenerated:!0}),ua=[{name:"Bohemian Rhapsody",artist:"Queen",image:"https://picsum.photos/300/300?random=1",isGeneratedImage:!0,provider:"lastfm"},{name:"Hotel California",artist:"Eagles",image:"https://picsum.photos/300/300?random=2",isGeneratedImage:!0,provider:"lastfm"},{name:"Imagine",artist:"John Lennon",image:"https://picsum.photos/300/300?random=3",isGeneratedImage:!0,provider:"lastfm"},{name:"Stairway to Heaven",artist:"Led Zeppelin",image:"https://picsum.photos/300/300?random=4",isGeneratedImage:!0,provider:"lastfm"},{name:"Yesterday",artist:"The Beatles",image:"https://picsum.photos/300/300?random=5",isGeneratedImage:!0,provider:"lastfm"},{name:"Smells Like Teen Spirit",artist:"Nirvana",image:"https://picsum.photos/300/300?random=6",isGeneratedImage:!0,provider:"lastfm"},{name:"Like a Rolling Stone",artist:"Bob Dylan",image:"https://picsum.photos/300/300?random=7",isGeneratedImage:!0,provider:"lastfm"},{name:"I Want to Hold Your Hand",artist:"The Beatles",image:"https://picsum.photos/300/300?random=8",isGeneratedImage:!0,provider:"lastfm"},{name:"Johnny B. Goode",artist:"Chuck Berry",image:"https://picsum.photos/300/300?random=9",isGeneratedImage:!0,provider:"lastfm"},{name:"Good Vibrations",artist:"The Beach Boys",image:"https://picsum.photos/300/300?random=10",isGeneratedImage:!0,provider:"lastfm"}],js=async e=>{const t=ua.filter(s=>s.name.toLowerCase().includes(e.toLowerCase())||s.artist.toLowerCase().includes(e.toLowerCase()));return await new Promise(s=>setTimeout(s,300)),t},Ns=()=>{const e=[];return ys&&de&&e.push("spotify"),e.push("lastfm"),e},ha=async e=>{const t=Ns();if(console.log(`🔍 音楽検索開始: "${e}"`),console.log(`📋 利用可能プロバイダー: ${t.map(s=>s.toUpperCase()).join(", ")}`),console.log(`⚙️ 現在のプロバイダー: ${G.toUpperCase()}`),t.includes(G))try{switch(G){case"spotify":return await Tr(e);case"lastfm":return await tt(e);default:{const s=`未サポートのプロバイダー: ${G}`;throw ae(G,!1,s),new Error(s)}}}catch(s){console.error(`${G.toUpperCase()}検索エラー:`,s)}else{const s=`${G.toUpperCase()}は現在利用できません`;ae(G,!1,s,s)}for(const s of t)if(s!==G)try{switch(console.log(`🔄 ${s.toUpperCase()}にフォールバックします`),s){case"spotify":return await Tr(e);case"lastfm":return await tt(e)}}catch(n){const o=(n==null?void 0:n.message)||`${s}フォールバック失敗`;ae(s,!1,o,"フォールバック試行中にエラー"),console.error(`${s.toUpperCase()}フォールバック失敗:`,n)}return console.warn("⚠️ 全てのプロバイダーが利用不可。モックデータを使用します。"),ae("lastfm",!1,"全プロバイダー失敗","モックデータにフォールバック"),await js(e)},_r=async e=>{if(!de)return rt(e);try{return(await ce.searchAlbums(e,de,10)).map(s=>({name:s.name,artist:s.artist,image:s.image||or(s.name,s.artist).image,url:s.spotifyUrl,isGeneratedImage:!s.image,provider:"spotify",id:s.id}))}catch(t){return console.error("Spotifyアルバム検索エラー:",t),rt(e)}},rt=async e=>{var t,s;try{return(((s=(t=(await gs.get(ws,{params:{method:"album.search",album:e,api_key:bs,format:"json",limit:10}})).data.results)==null?void 0:t.albummatches)==null?void 0:s.album)||[]).map(a=>{var c,d,u,f,b,p;const i=((d=(c=a.image)==null?void 0:c[3])==null?void 0:d["#text"])||((f=(u=a.image)==null?void 0:u[2])==null?void 0:f["#text"])||((p=(b=a.image)==null?void 0:b[1])==null?void 0:p["#text"])||"",l=or(a.name,a.artist);return{name:a.name,artist:a.artist,image:et(i)?i:l.image,url:a.url,isGeneratedImage:!et(i),provider:"lastfm"}})}catch(n){return console.error("アルバム検索エラー:",n),[]}},ma=async e=>{try{const t=await da(e);return t.length>0?t:await ha(e)}catch(t){return console.error("統合検索エラー:",t),await js(e)}},fa=async e=>await ma(e);async function ga(){const{spotifyAuth:e}=await dn(()=>Promise.resolve().then(()=>na),void 0);return e.getAuthUrl()}function pa(){const e=fe();return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:r.jsxs("div",{className:"container mx-auto px-4 py-16",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsxs("h1",{className:"text-7xl font-bold text-gray-900 mb-6",children:["Musi",r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-cyan-500",children:"Card"})]}),r.jsx("p",{className:"text-gray-600 text-xl mb-8 max-w-2xl mx-auto leading-relaxed",children:"好きな音で、あなたを彩ろう"}),r.jsx("div",{className:"flex justify-center gap-4 mb-8",children:r.jsx(me,{to:"/login",className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-8 py-4 rounded-xl font-semibold hover:from-blue-600 hover:to-cyan-600 transition-all duration-300 hover:scale-105 text-lg shadow-lg hover:shadow-xl",children:"ログイン / 音楽名刺を作成"})}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 shadow-lg",children:[r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"サンプル名刺をご覧ください"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(me,{to:"/users/alice",className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-6 py-3 rounded-xl font-semibold hover:from-blue-600 hover:to-cyan-600 transition-all duration-300 hover:scale-105 shadow-md hover:shadow-lg",children:"Aliceの名刺"}),r.jsx(me,{to:"/users/bob",className:"bg-gray-100 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-200 transition-all duration-300 hover:scale-105 border border-gray-200",children:"Bobの名刺"})]})]})})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl mx-auto mb-4 flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 3a1 1 0 00-1.447-.894L8.763 6H5a3 3 0 000 6h.28l1.771 5.316A1 1 0 008 18h1a1 1 0 001-1v-4.382l6.553 3.894A1 1 0 0018 16V3z",clipRule:"evenodd"})})}),r.jsx("h3",{className:"text-gray-900 font-semibold text-lg mb-2",children:"洗練されたデザイン"}),r.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Topsters風のモダンで美しいレイアウト"})]}),r.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-xl mx-auto mb-4 flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),r.jsx("h3",{className:"text-gray-900 font-semibold text-lg mb-2",children:"簡単シェア"}),r.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"SNSのプロフィールに貼るだけで音楽の趣味を共有"})]}),r.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-400 to-cyan-400 rounded-xl mx-auto mb-4 flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-gray-900 font-semibold text-lg mb-2",children:"どこでも表示"}),r.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"PC・スマートフォンどちらでも美しく表示"})]})]}),r.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-8 border border-blue-200/50 shadow-lg",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-4",children:"🎵 音楽検索機能"}),r.jsx("p",{className:"text-blue-700 mb-4",children:"SpotifyとLast.fmの両方に対応した音楽検索で、豊富な楽曲データベースから選択できます。"}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"🎧 Spotify認証"}),r.jsx("p",{className:"text-blue-600 text-sm",children:"Spotifyにログインして、より豊富な音楽データベースにアクセス"})]}),r.jsxs("button",{onClick:async()=>{const t=await ga();window.open(t,"_blank")},className:"bg-green-500 text-white px-4 py-2 rounded-xl font-semibold hover:bg-green-600 transition-colors duration-300 flex items-center gap-2",children:[r.jsx("span",{children:"🎵"}),"Spotify連携"]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"🎯 Spotify検索"}),r.jsx("p",{className:"text-blue-600 text-sm",children:"高精度な検索結果と豊富なメタデータ"})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"🔄 Last.fmフォールバック"}),r.jsx("p",{className:"text-blue-600 text-sm",children:"Spotifyで見つからない場合の自動フォールバック"})]})]})]}),!1,r.jsx("div",{className:"mt-16 pt-8 border-t border-gray-200/50",children:r.jsx("div",{className:"text-center",children:r.jsx("button",{onClick:()=>e("/admin-login"),className:"text-xs text-gray-300 hover:text-gray-500 transition-colors px-2 py-1 rounded opacity-50 hover:opacity-100",title:"管理者ログイン",children:"⚙️"})})})]})})}function xa(){const e=fe(),[t,s]=N.useState(""),[n,o]=N.useState(""),[a,i]=N.useState(!1),[l,c]=N.useState(!1),d=async u=>{if(u.preventDefault(),!(!t.trim()||!n.trim())){i(!0);try{const f=t.trim().toLowerCase(),b=localStorage.getItem(`musicard_auth_${f}`);if(b){if(JSON.parse(b).password!==n){alert("❌ パスワードが正しくありません");return}console.log(`✅ ユーザー「${t}」でログインしました`)}else if(l){const p={username:f,password:n,createdAt:new Date().toISOString()};localStorage.setItem(`musicard_auth_${f}`,JSON.stringify(p)),console.log(`🆕 新規ユーザー「${t}」を登録しました`)}else{alert("❌ ユーザーが見つかりません。新規登録をしてください。");return}localStorage.setItem("musicard_user",f),localStorage.setItem("musicard_login_time",Date.now().toString()),e("/dashboard")}catch(f){console.error("ログインエラー:",f),alert("ログインに失敗しました")}finally{i(!1)}}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:["Musi",r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-cyan-500",children:"Card"})]}),r.jsx("p",{className:"text-gray-600",children:"音楽名刺でつながろう"})]}),r.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1 mb-6",children:[r.jsx("button",{type:"button",onClick:()=>c(!1),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${l?"text-gray-600 hover:text-gray-800":"bg-white text-blue-600 shadow-sm"}`,children:"ログイン"}),r.jsx("button",{type:"button",onClick:()=>c(!0),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${l?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"新規登録"})]}),r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ユーザー名"}),r.jsx("input",{type:"text",value:t,onChange:u=>s(u.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"英数字でユーザー名を入力",required:!0,disabled:a})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"パスワード"}),r.jsx("input",{type:"password",value:n,onChange:u=>o(u.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"パスワードを入力",required:!0,disabled:a}),l&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"パスワードは安全に保管されます"})]}),r.jsx("button",{type:"submit",disabled:!t.trim()||!n.trim()||a,className:"w-full bg-gradient-to-r from-blue-500 to-cyan-500 text-white py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-cyan-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:a?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),l?"登録中...":"ログイン中..."]}):l?"新規登録":"ログイン"})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-600 text-center mb-4",children:"または、ゲストとして閲覧"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>e("/users/alice"),className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Aliceの名刺"}),r.jsx("button",{onClick:()=>e("/users/bob"),className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"Bobの名刺"})]})]}),!1]})})}function ba(){const e=fe(),[t,s]=N.useState(""),[n,o]=N.useState(""),[a,i]=N.useState(!1),l=async c=>{if(c.preventDefault(),!(!t.trim()||!n.trim())){i(!0);try{if(!({}.VITE_ADMIN_USERS||"admin").split(",").includes(t.toLowerCase())){alert("❌ 管理者権限がありません");return}const u=`musicard_admin_${t.toLowerCase()}`,f=localStorage.getItem(u);if(f){if(JSON.parse(f).password!==n){alert("❌ 管理者パスワードが正しくありません");return}}else{const b={username:t.toLowerCase(),password:n,role:"admin",createdAt:new Date().toISOString()};localStorage.setItem(u,JSON.stringify(b)),console.log(`🛡️ 管理者アカウント「${t}」を作成しました`)}localStorage.setItem("musicard_admin",t.toLowerCase()),localStorage.setItem("musicard_admin_login_time",Date.now().toString()),console.log(`🛡️ 管理者「${t}」でログインしました`),e("/admin")}catch(d){console.error("管理者ログインエラー:",d),alert("ログインに失敗しました")}finally{i(!1)}}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-100 flex items-center justify-center",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md border-t-4 border-red-500",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full mx-auto mb-4 flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"管理者ログイン"}),r.jsx("p",{className:"text-gray-600",children:"MusiCard Admin Panel"})]}),r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})}),r.jsx("p",{className:"text-red-700 text-sm",children:"管理者のみアクセス可能です"})]})}),r.jsxs("form",{onSubmit:l,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"管理者ユーザー名"}),r.jsx("input",{type:"text",value:t,onChange:c=>s(c.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"管理者ユーザー名",required:!0,disabled:a})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"管理者パスワード"}),r.jsx("input",{type:"password",value:n,onChange:c=>o(c.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"管理者パスワード",required:!0,disabled:a})]}),r.jsx("button",{type:"submit",disabled:!t.trim()||!n.trim()||a,className:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white py-3 rounded-lg font-semibold hover:from-red-600 hover:to-red-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:a?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"ログイン中..."]}):"管理者ログイン"})]}),r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center",children:r.jsx("button",{onClick:()=>e("/"),className:"text-gray-500 hover:text-gray-700 text-sm transition-colors",children:"← トップページに戻る"})}),!1]})})}const je=[{id:"blue",name:"ブルー",gradient:"from-blue-500 to-blue-600",primary:"blue-500",secondary:"blue-100"},{id:"purple",name:"パープル",gradient:"from-purple-500 to-purple-600",primary:"purple-500",secondary:"purple-100"},{id:"green",name:"グリーン",gradient:"from-green-500 to-green-600",primary:"green-500",secondary:"green-100"},{id:"pink",name:"ピンク",gradient:"from-pink-500 to-pink-600",primary:"pink-500",secondary:"pink-100"},{id:"orange",name:"オレンジ",gradient:"from-orange-500 to-orange-600",primary:"orange-500",secondary:"orange-100"},{id:"red",name:"レッド",gradient:"from-red-500 to-red-600",primary:"red-500",secondary:"red-100"},{id:"indigo",name:"インディゴ",gradient:"from-indigo-500 to-indigo-600",primary:"indigo-500",secondary:"indigo-100"},{id:"teal",name:"ティール",gradient:"from-teal-500 to-teal-600",primary:"teal-500",secondary:"teal-100"}],st=[{id:"3x3",name:"3×3 (9セル)",size:3,totalCells:9,centerPosition:4},{id:"4x4",name:"4×4 (16セル)",size:4,totalCells:16,centerPosition:6},{id:"5x5",name:"5×5 (25セル)",size:5,totalCells:25,centerPosition:12},{id:"6x6",name:"6×6 (36セル)",size:6,totalCells:36,centerPosition:15}],Ir=["J-POP","K-POP","ロック","メタル","パンク","オルタナティブ","インディー","エレクトロニカ","テクノ","ハウス","ダブステップ","ヒップホップ","R&B","ソウル","ファンク","ジャズ","ブルース","フォーク","カントリー","レゲエ","クラシック","アニメ","ゲーム音楽","ボサノヴァ","ラテン","ワールドミュージック","アンビエント","その他"],Le="musicmeisi_users",Ss="musicmeisi_users_backup",ue=()=>{try{const e=localStorage.getItem(Le);if(!e)return console.log("📂 ユーザーデータが見つかりません。新しいストレージを初期化します"),{};const t=JSON.parse(e);console.log(`📂 ${Object.keys(t).length}人のユーザーデータを読み込みました`);const s={};for(const[n,o]of Object.entries(t))ka(o)?s[n]=o:console.warn(`⚠️ 無効なユーザーデータをスキップ: ${n}`);return s}catch(e){return console.error("❌ ユーザーデータの読み込みに失敗:",e),{}}},wa=e=>{try{return ue()[e]||null}catch(t){return console.error(`❌ ユーザー「${e}」の読み込みに失敗:`,t),null}},ks=e=>{try{const t=ue();return pt(t),t[e.username]={...e,updatedAt:new Date().toISOString()},localStorage.setItem(Le,JSON.stringify(t)),console.log(`💾 ユーザー「${e.username}」のデータを保存しました`),console.log(`📊 現在の総ユーザー数: ${Object.keys(t).length}人`),!0}catch(t){return console.error(`❌ ユーザー「${e.username}」の保存に失敗:`,t),!1}},ya=e=>{try{const t=ue();return t[e]?(pt(t),delete t[e],localStorage.setItem(Le,JSON.stringify(t)),console.log(`🗑️ ユーザー「${e}」のデータを削除しました`),console.log(`📊 現在の総ユーザー数: ${Object.keys(t).length}人`),!0):(console.warn(`⚠️ ユーザー「${e}」は存在しません`),!1)}catch(t){return console.error(`❌ ユーザー「${e}」の削除に失敗:`,t),!1}},Cs=()=>{try{const e=ue();return Object.entries(e).map(([t,s])=>{var n;return{username:t,displayName:s.displayName||t,songCount:((n=s.songs)==null?void 0:n.length)||0,viewCount:s.viewCount||0,updatedAt:s.updatedAt||s.createdAt||""}}).sort((t,s)=>new Date(s.updatedAt).getTime()-new Date(t.updatedAt).getTime())}catch(e){return console.error("❌ ユーザーリストの取得に失敗:",e),[]}},va=e=>{try{const t=ue();return t[e]?(t[e].viewCount=(t[e].viewCount||0)+1,t[e].updatedAt=new Date().toISOString(),localStorage.setItem(Le,JSON.stringify(t)),!0):(console.warn(`⚠️ ユーザー「${e}」は存在しません`),!1)}catch(t){return console.error("❌ 訪問者数の更新に失敗:",t),!1}},pt=e=>{try{const t=e||ue(),s={data:t,timestamp:new Date().toISOString(),userCount:Object.keys(t).length};return localStorage.setItem(Ss,JSON.stringify(s)),console.log(`💾 バックアップを作成しました (${s.userCount}人のユーザー)`),!0}catch(t){return console.error("❌ バックアップの作成に失敗:",t),!1}},ja=()=>{try{const e=localStorage.getItem(Ss);if(!e)return console.warn("⚠️ バックアップデータが見つかりません"),!1;const t=JSON.parse(e);return localStorage.setItem(Le,JSON.stringify(t.data)),console.log(`🔄 バックアップから復元しました (${t.userCount}人のユーザー)`),console.log(`📅 バックアップ作成日時: ${new Date(t.timestamp).toLocaleString()}`),!0}catch(e){return console.error("❌ バックアップからの復元に失敗:",e),!1}},Na=()=>{try{const e=ue(),t={version:"1.0",exportDate:new Date().toISOString(),userCount:Object.keys(e).length,users:e};return JSON.stringify(t,null,2)}catch(e){return console.error("❌ データのエクスポートに失敗:",e),""}},Sa=e=>{try{const t=JSON.parse(e);if(!t.users||typeof t.users!="object")throw new Error("無効なデータ形式です");return pt(),localStorage.setItem(Le,JSON.stringify(t.users)),console.log(`📥 データをインポートしました (${Object.keys(t.users).length}人のユーザー)`),!0}catch(t){return console.error("❌ データのインポートに失敗:",t),!1}},ka=e=>!e||typeof e!="object"?!1:["username","displayName","songs","createdAt"].every(s=>s in e),Ca=()=>{try{const e=ue(),t=Object.keys(e).length;let s=0,n=0;Object.values(e).forEach(a=>{var i;s+=((i=a.songs)==null?void 0:i.length)||0,n+=a.viewCount||0});const o=new Blob([JSON.stringify(e)]).size;return{totalUsers:t,totalSongs:s,totalViews:n,storageSizeBytes:o,storageSizeKB:Math.round(o/1024*100)/100}}catch(e){return console.error("❌ 統計情報の取得に失敗:",e),{totalUsers:0,totalSongs:0,totalViews:0,storageSizeBytes:0,storageSizeKB:0}}},Es={}.VITE_STORAGE_PROVIDER||"localStorage";class Rs{async loadAllUsers(){return Promise.resolve(ue())}async loadUser(t){return Promise.resolve(wa(t))}async saveUser(t){return Promise.resolve(ks(t))}async incrementViewCount(t){return Promise.resolve(va(t))}}class Ea{constructor(){fr(this,"fallback",new Rs)}async loadAllUsers(){try{return console.log("🔄 Vercel Blob実装は準備中です。ローカルストレージにフォールバック中..."),await this.fallback.loadAllUsers()}catch(t){return console.error("Vercel Blobエラー、ローカルストレージにフォールバック:",t),await this.fallback.loadAllUsers()}}async loadUser(t){try{return await this.fallback.loadUser(t)}catch(s){return console.error("Vercel Blobエラー、ローカルストレージにフォールバック:",s),await this.fallback.loadUser(t)}}async saveUser(t){try{return await this.fallback.saveUser(t)}catch(s){return console.error("Vercel Blobエラー、ローカルストレージにフォールバック:",s),await this.fallback.saveUser(t)}}async incrementViewCount(t){try{return await this.fallback.incrementViewCount(t)}catch(s){return console.error("Vercel Blobエラー、ローカルストレージにフォールバック:",s),await this.fallback.incrementViewCount(t)}}async uploadImage(t,s){try{return console.log(`🖼️ 画像アップロード準備中: ${s}`),new Promise(n=>{const o=new FileReader;o.onloadend=()=>n(o.result),o.readAsDataURL(t)})}catch(n){throw console.error("画像アップロードエラー:",n),n}}}function Ra(){switch(Es){case"vercelBlob":return console.log("🚀 Vercel Blobストレージを使用中（フォールバック付き）"),new Ea;case"localStorage":default:return console.log("💾 ローカルストレージを使用中"),new Rs}}const ve=Ra();function $r(){return{current:Es,available:["localStorage","vercelBlob"],override:localStorage.getItem("OVERRIDE_STORAGE_PROVIDER"),environment:{}.VITE_STORAGE_PROVIDER}}function ar({onSelect:e,placeholder:t="曲名やアーティスト名を検索...",className:s=""}){const[n,o]=N.useState(""),[a,i]=N.useState([]),[l,c]=N.useState(!1),[d,u]=N.useState(!1),[f,b]=N.useState(-1),[p,g]=N.useState(!1),[h,m]=N.useState(0),x=N.useRef(null),y=N.useRef(null),v=async(k,A=!1)=>{if(k.trim().length<1){i([]),u(!1);return}c(!0),m(Date.now());try{const $=await fa(k);if(i($),u($.length>0),b(-1),A){g(!0);const z=Tt(),M=_t();if(console.group(`🔍 手動検索結果詳細 (${new Date().toLocaleTimeString()})`),console.log(`📝 検索クエリ: "${k}"`),console.log(`⚙️ 現在のプロバイダー: ${M.toUpperCase()}`),console.log(`📊 検索結果数: ${$.length}件`),z.length>0){console.log("📋 検索状況:"),z.forEach((K,St)=>{const ze=K.success?"✅":"❌";console.log(`  ${St+1}. ${ze} ${K.provider.toUpperCase()}`),K.error&&console.log(`     エラー: ${K.error}`),K.fallbackReason&&console.log(`     フォールバック理由: ${K.fallbackReason}`)});const q=z.filter(K=>!K.success);q.length>0&&(console.warn("⚠️ フォールバック詳細:"),q.forEach(K=>{K.fallbackReason&&console.warn(`  • ${K.provider.toUpperCase()}: ${K.fallbackReason}`)}))}console.groupEnd()}}catch($){console.error("🔍 検索エラー:",$),i([]),u(!1)}finally{c(!1)}};N.useEffect(()=>{if(n.trim().length<2){i([]),u(!1);return}const k=setTimeout(()=>{v(n,!1)},300);return()=>clearTimeout(k)},[n]);const S=()=>{n.trim().length>=1&&v(n,!0)},R=()=>{if(g(!p),!p){const k=Tt(),A=_t();console.group("📊 現在の検索状況詳細"),console.log(`⚙️ アクティブプロバイダー: ${A.toUpperCase()}`),k.length>0?(console.log("📋 最新の検索履歴:"),k.forEach(($,z)=>{const M=$.success?"✅":"❌",q=new Date($.timestamp).toLocaleTimeString();console.log(`  ${z+1}. ${M} ${$.provider.toUpperCase()} (${q})`),$.error&&console.log(`     エラー: ${$.error}`),$.fallbackReason&&console.log(`     理由: ${$.fallbackReason}`)})):console.log("まだ検索が実行されていません"),console.groupEnd()}},j=()=>{const k=Tt(),A=_t();return k.length===0?null:r.jsxs("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium text-blue-900",children:"検索状況詳細"}),r.jsxs("span",{className:"text-blue-600 text-xs",children:["現在: ",A.toUpperCase()]})]}),k.map(($,z)=>r.jsxs("div",{className:"mb-1 last:mb-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:$.success?"text-green-600":"text-red-600",children:$.success?"✅":"❌"}),r.jsx("span",{className:"font-medium text-blue-800",children:$.provider.toUpperCase()}),r.jsx("span",{className:"text-blue-500 text-xs",children:new Date($.timestamp).toLocaleTimeString()})]}),$.error&&r.jsxs("div",{className:"ml-6 text-red-600 text-xs",children:["エラー: ",$.error]}),$.fallbackReason&&r.jsx("div",{className:"ml-6 text-orange-600 text-xs",children:$.fallbackReason})]},z))]})},E=k=>{if(d)switch(k.key){case"ArrowDown":k.preventDefault(),b(A=>A<a.length-1?A+1:A);break;case"ArrowUp":k.preventDefault(),b(A=>A>0?A-1:-1);break;case"Enter":k.preventDefault(),f>=0&&a[f]&&L(a[f]);break;case"Escape":u(!1),b(-1);break}},L=k=>{var A;e(k),o(""),i([]),u(!1),b(-1),(A=x.current)==null||A.blur()};return N.useEffect(()=>{const k=A=>{y.current&&!y.current.contains(A.target)&&x.current&&!x.current.contains(A.target)&&(u(!1),b(-1))};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]),r.jsxs("div",{className:`relative ${s}`,children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:x,type:"text",value:n,onChange:k=>o(k.target.value),onKeyDown:E,onFocus:()=>n.trim().length>=2&&a.length>0&&u(!0),className:"w-full px-4 py-3 pr-24 bg-white border border-blue-200 rounded-lg text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:t}),r.jsxs("div",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 flex items-center gap-1",children:[r.jsx("button",{type:"button",onClick:S,disabled:l||n.trim().length<1,className:"p-2 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"手動検索を実行",children:l?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}):r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),h>0&&r.jsx("button",{type:"button",onClick:R,className:"p-2 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-md transition-colors duration-200",title:"検索状況詳細を表示",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]}),p&&r.jsx(j,{}),d&&r.jsxs("div",{ref:y,className:"absolute z-50 w-full mt-1 bg-white border border-blue-200 rounded-lg shadow-xl max-h-80 overflow-y-auto",children:[a.map((k,A)=>r.jsxs("div",{onClick:()=>L(k),className:`flex items-center p-3 cursor-pointer transition-colors duration-200 ${A===f?"bg-blue-500 text-white":"hover:bg-blue-50 text-blue-900"}`,children:[r.jsxs("div",{className:"flex-shrink-0 w-12 h-12 mr-3 relative",children:[r.jsx("img",{src:k.image||`https://picsum.photos/48/48?random=${A}`,alt:`${k.name} by ${k.artist}`,className:"w-full h-full object-cover rounded-lg",onError:$=>{const z=$.target;z.src=`https://picsum.photos/48/48?random=${A}`}}),k.isGeneratedImage&&r.jsx("div",{className:"absolute -top-1 -right-1 bg-orange-500 text-white text-xs px-1 py-0.5 rounded-full",children:"AI"}),k.provider&&r.jsx("div",{className:`absolute -bottom-1 -left-1 text-white text-xs px-1 py-0.5 rounded-full ${k.provider==="spotify"?"bg-green-500":"bg-red-500"}`,children:k.provider==="spotify"?"S":"L"})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:`font-medium truncate ${A===f?"text-white":"text-blue-900"}`,children:k.name}),r.jsx("div",{className:`text-sm truncate ${A===f?"text-blue-100":"text-blue-600"}`,children:k.artist})]}),A===f&&r.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},`${k.name}-${k.artist}-${A}`)),a.length===0&&n.trim().length>=2&&!l&&r.jsx("div",{className:"p-4 text-center text-blue-600",children:"検索結果が見つかりませんでした"})]})]})}function La(){const e=fe(),[t,s]=N.useState(""),[n,o]=N.useState(null),[a,i]=N.useState(!0),[l,c]=N.useState(!1);N.useEffect(()=>{d()},[]);const d=async()=>{const m=localStorage.getItem("musicard_user");if(!m){e("/login");return}s(m),await u(m)},u=async m=>{try{let x=await ve.loadUser(m);x||(x={username:m,displayName:m,bio:"",themeColor:je[0],socialLinks:{},favoriteGenres:[],songs:[],gridLayout:st[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),viewCount:0,isPublic:!0},await ve.saveUser(x),console.log(`🆕 新規ユーザー「${m}」のプロフィールを作成しました`)),o(x)}catch(x){console.error("ユーザーデータの読み込みエラー:",x)}finally{i(!1)}},f=async()=>{if(n){c(!0);try{await ve.saveUser({...n,updatedAt:new Date().toISOString()})?console.log("✅ プロフィールを保存しました"):alert("❌ 保存に失敗しました")}catch(m){console.error("保存エラー:",m),alert("❌ 保存中にエラーが発生しました")}finally{c(!1)}}},b=()=>{confirm("ログアウトしますか？")&&(localStorage.removeItem("musicard_user"),localStorage.removeItem("musicard_login_time"),e("/login"))},p=()=>{t&&window.open(`/users/${t}`,"_blank")},g=m=>{if(!n)return;const x={id:m.id||`${m.name}-${m.artist}`.replace(/\s+/g,"-").toLowerCase(),title:m.name,artist:m.artist,jacket:m.image,previewUrl:null,addedAt:new Date().toISOString()};o({...n,songs:[...n.songs,x]})},h=m=>{n&&o({...n,songs:n.songs.filter(x=>x.id!==m)})};return a?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"読み込み中..."})]})}):n?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[n.displayName,"の音楽名刺"]}),r.jsxs("p",{className:"text-gray-600",children:["@",t]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:p,className:"bg-white text-blue-600 px-4 py-2 rounded-lg border border-blue-200 hover:bg-blue-50 transition-colors font-medium",children:"👁️ プレビュー"}),r.jsx("button",{onClick:f,disabled:l,className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-6 py-2 rounded-lg font-medium hover:from-blue-600 hover:to-cyan-600 transition-all disabled:opacity-50",children:l?"保存中...":"💾 保存"}),r.jsx("button",{onClick:b,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors",children:"ログアウト"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"基本情報"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"表示名"}),r.jsx("input",{type:"text",value:n.displayName,onChange:m=>o({...n,displayName:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"自己紹介"}),r.jsx("textarea",{value:n.bio,onChange:m=>o({...n,bio:m.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"音楽の趣味について..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"テーマカラー"}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:je.map(m=>r.jsx("button",{onClick:()=>o({...n,themeColor:m}),className:`p-3 rounded-lg text-white text-xs font-medium transition-all ${n.themeColor.name===m.name?"ring-2 ring-gray-400 scale-105":"hover:scale-105"}`,style:{background:`linear-gradient(135deg, ${m.primary}, ${m.secondary})`},children:m.name},m.name))})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"音楽を追加"}),r.jsx(ar,{onSelect:g,placeholder:"楽曲名やアーティスト名で検索..."})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:["楽曲リスト (",n.songs.length,")"]}),n.songs.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("div",{className:"text-4xl mb-4",children:"🎵"}),r.jsx("p",{children:"まだ楽曲が追加されていません"}),r.jsx("p",{className:"text-sm",children:"左側の検索から楽曲を追加してみましょう"})]}):r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:n.songs.map(m=>r.jsxs("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[r.jsx("img",{src:m.jacket||"/default-cover.jpg",alt:m.title,className:"w-12 h-12 rounded object-cover"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-gray-900 truncate",children:m.title}),r.jsx("div",{className:"text-sm text-gray-500 truncate",children:m.artist})]}),r.jsx("button",{onClick:()=>{const x=m.id||`${m.title}-${m.artist}`.replace(/\s+/g,"-").toLowerCase();h(x)},className:"text-red-500 hover:text-red-700 p-1",title:"削除",children:"🗑️"})]},m.id))})]})]}),r.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"共有"}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-blue-700 mb-3",children:"あなたの音楽名刺URL:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:`${window.location.origin}/users/${t}`,readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-gray-300 rounded text-sm"}),r.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/users/${t}`)},className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 transition-colors",children:"📋 コピー"})]})]})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-red-600",children:"プロフィールの読み込みに失敗しました"}),r.jsx("button",{onClick:()=>e("/login"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded",children:"ログインページに戻る"})]})})}const Aa=[{title:"Shape of You",artist:"Ed Sheeran",jacket:"https://picsum.photos/300/300?random=1"},{title:"Blinding Lights",artist:"The Weeknd",jacket:"https://picsum.photos/300/300?random=2"},{title:"As It Was",artist:"Harry Styles",jacket:"https://picsum.photos/300/300?random=3"},{title:"Good 4 U",artist:"Olivia Rodrigo",jacket:"https://picsum.photos/300/300?random=4"}],Ta=[{title:"Pretender",artist:"Official髭男dism",jacket:"https://picsum.photos/300/300?random=5"},{title:"紅蓮華",artist:"LiSA",jacket:"https://picsum.photos/300/300?random=6"},{title:"猫",artist:"DISH//",jacket:"https://picsum.photos/300/300?random=7"}],_a={alice:Aa,bob:Ta};function Ia({title:e,artist:t,previewUrl:s,coverImage:n,onPlay:o,onPause:a,onError:i}){const[l,c]=N.useState(!1),[d,u]=N.useState(0),[f,b]=N.useState(30),[p,g]=N.useState(!1),[h,m]=N.useState(!1),x=N.useRef(null),y=N.useRef(null),v=async()=>{if(!s){i==null||i("試聴用音源が利用できません");return}if(x.current)try{g(!0),m(!1),l?(x.current.pause(),c(!1),a==null||a()):(await x.current.play(),c(!0),o==null||o())}catch(L){console.error("再生エラー:",L),m(!0),i==null||i("音楽の再生に失敗しました")}finally{g(!1)}},S=()=>{x.current&&u(x.current.currentTime)},R=L=>{if(!x.current||!y.current)return;const k=y.current.getBoundingClientRect(),A=L.clientX-k.left,$=k.width,z=A/$*f;x.current.currentTime=z,u(z)},j=L=>{const k=Math.floor(L/60),A=Math.floor(L%60);return`${k}:${A.toString().padStart(2,"0")}`},E=f>0?d/f*100:0;return N.useEffect(()=>{const L=x.current;if(!L)return;const k=()=>{b(L.duration)},A=()=>{c(!1),u(0)},$=()=>{m(!0),c(!1),i==null||i("音楽ファイルの読み込みに失敗しました")};return L.addEventListener("loadedmetadata",k),L.addEventListener("timeupdate",S),L.addEventListener("ended",A),L.addEventListener("error",$),()=>{L.removeEventListener("loadedmetadata",k),L.removeEventListener("timeupdate",S),L.removeEventListener("ended",A),L.removeEventListener("error",$)}},[i]),N.useEffect(()=>{c(!1),u(0),m(!1)},[s]),s?r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 max-w-sm mx-auto",children:[r.jsx("audio",{ref:x,src:s,preload:"metadata"}),r.jsx("div",{className:"aspect-square mb-4 rounded-lg overflow-hidden bg-gray-200",children:r.jsx("img",{src:n,alt:`${e} by ${t}`,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:e}),r.jsx("p",{className:"text-sm text-gray-600 truncate",children:t})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx("button",{onClick:v,disabled:p||h,className:`
              w-12 h-12 rounded-full flex items-center justify-center transition-all duration-200
              ${p||h?"bg-gray-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 hover:scale-105 shadow-lg"}
            `,children:p?r.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):h?r.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}):l?r.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):r.jsx("svg",{className:"w-6 h-6 text-white ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})})}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{ref:y,onClick:R,className:"h-2 bg-gray-200 rounded-full cursor-pointer overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 transition-all duration-200 rounded-full",style:{width:`${E}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[r.jsx("span",{children:j(d)}),r.jsx("span",{children:j(f)})]})]})]}),h&&r.jsx("div",{className:"mt-2 text-xs text-red-500 text-center",children:"試聴に失敗しました"})]}):(console.warn(`⚠️ 試聴不可: "${e}" by "${t}"`),console.warn("💡 理由: Spotifyプレビューが提供されていません"),console.warn(`🔧 対処法: 
      1. 他の楽曲を試してください
      2. Spotify Premiumを検討してください  
      3. アーティストがプレビューを無効にしている可能性があります`),r.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-100 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM15.657 6.343a1 1 0 011.414 1.414L15.657 9.17l1.414 1.414a1 1 0 11-1.414 1.414L14.243 10.584l-1.414 1.414a1 1 0 11-1.414-1.414L12.829 9.17l-1.414-1.414a1 1 0 111.414-1.414L14.243 7.756l1.414-1.413z",clipRule:"evenodd"})}),r.jsx("p",{className:"text-xs text-gray-500",children:"試聴不可"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"プレビュー未提供"})]})}))}function $a({title:e,artist:t,videoId:s,coverImage:n,onError:o}){const[a,i]=N.useState(!1),[l,c]=N.useState(!1),[d,u]=N.useState(0),[f]=N.useState(30),[b,p]=N.useState(1),[g,h]=N.useState(0),[m,x]=N.useState(!1),y=N.useRef(null),v=N.useRef(null),S=N.useRef(null),R=async()=>{try{x(!0);const M=Math.floor(Math.random()*30)+45;h(M),console.log(`🎵 サビ予測時間: ${M}秒`)}catch(M){console.error("サビ検出エラー:",M),h(0)}finally{x(!1)}},j=()=>{p(0);let M=0;S.current=setInterval(()=>{M+=.05,M>=1&&(M=1,clearInterval(S.current)),p(M)},50)},E=M=>{let q=b;S.current=setInterval(()=>{q-=.05,q<=0&&(q=0,clearInterval(S.current),M==null||M()),p(q)},50)},L=()=>{if(!s){o==null||o("YouTube動画IDが取得できませんでした");return}try{c(!1),i(!0),u(0),j(),v.current=setInterval(()=>{u(M=>{const q=M+1;return q>=f?(k(),f):q})},1e3),console.log(`▶️ YouTube試聴開始: ${e} - ${t}`),console.log(`🎥 Video ID: ${s}, Start: ${g}s`)}catch(M){console.error("YouTube再生エラー:",M),c(!0),i(!1),o==null||o("YouTube動画の再生に失敗しました")}},k=()=>{E(()=>{i(!1),u(0),v.current&&(clearInterval(v.current),v.current=null),S.current&&(clearInterval(S.current),S.current=null)}),console.log(`⏹️ YouTube試聴停止: ${e} - ${t}`)},A=()=>`https://www.youtube.com/embed/${s}?autoplay=1&start=${g}&end=${g+f}&controls=1&modestbranding=1&rel=0&showinfo=0&enablejsapi=1&origin=${window.location.origin}`,$=d/f*100,z=M=>{const q=Math.floor(M/60),K=M%60;return`${q}:${K.toString().padStart(2,"0")}`};return N.useEffect(()=>()=>{v.current&&clearInterval(v.current),S.current&&clearInterval(S.current)},[]),s?r.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden max-w-sm mx-auto",children:[r.jsx("div",{className:"relative aspect-video bg-black",children:a?r.jsxs("div",{className:"relative w-full h-full",children:[r.jsx("iframe",{ref:y,width:"100%",height:"100%",src:A(),title:`${e} by ${t}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute inset-0",style:{opacity:b}}),r.jsx("button",{onClick:k,className:"absolute top-2 left-2 bg-black/70 text-white p-2 rounded-full hover:bg-black/90 transition-colors",children:r.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})})}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 p-2",children:r.jsxs("div",{className:"flex items-center gap-2 text-white text-xs",children:[r.jsx("span",{children:z(d)}),r.jsx("div",{className:"flex-1 bg-gray-600 rounded-full h-1 overflow-hidden",children:r.jsx("div",{className:"h-full bg-red-500 transition-all duration-1000 ease-linear",style:{width:`${$}%`}})}),r.jsx("span",{children:z(f)})]})})]}):r.jsxs("div",{className:"relative w-full h-full",children:[r.jsx("img",{src:n,alt:`${e} by ${t}`,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:r.jsx("button",{onClick:L,disabled:l,className:`
                  w-16 h-16 rounded-full flex items-center justify-center transition-all duration-200
                  ${l?"bg-gray-500 cursor-not-allowed":"bg-red-600 hover:bg-red-700 hover:scale-110 shadow-lg"}
                `,children:l?r.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}):r.jsx("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M8 5v14l11-7z"})})})}),r.jsx("div",{className:"absolute top-2 right-2 bg-black/70 rounded px-2 py-1",children:r.jsx("svg",{className:"w-6 h-4 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})})})]})}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 truncate mb-1",children:e}),r.jsx("p",{className:"text-sm text-gray-600 truncate mb-3",children:t}),r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsxs("button",{onClick:R,disabled:m,className:"flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-xs disabled:opacity-50",children:[m?r.jsx("div",{className:"w-3 h-3 border border-blue-500 border-t-transparent rounded-full animate-spin"}):r.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"サビ検出"]}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[r.jsx("span",{children:"開始:"}),r.jsx("span",{className:"font-mono",children:z(g)})]})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),"30秒プレビュー"]}),a&&r.jsxs("span",{className:"text-red-500 font-medium flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"再生中"]})]})]}),l&&r.jsx("div",{className:"px-4 pb-4",children:r.jsx("div",{className:"text-xs text-red-500 text-center bg-red-50 p-2 rounded",children:"YouTube動画の再生に失敗しました"})})]}):r.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-100 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),r.jsx("p",{className:"text-xs text-gray-500",children:"YouTube動画なし"})]})})}var Oe={},Pa=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ls={},te={};let ir;const Ma=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];te.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};te.getSymbolTotalCodewords=function(t){return Ma[t]};te.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};te.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');ir=t};te.isKanjiModeEnabled=function(){return typeof ir<"u"};te.toSJIS=function(t){return ir(t)};var xt={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+s)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,o){if(e.isValid(n))return n;try{return t(n)}catch{return o}}})(xt);function As(){this.buffer=[],this.length=0}As.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let s=0;s<t;s++)this.putBit((e>>>t-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Ba=As;function De(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}De.prototype.set=function(e,t,s,n){const o=e*this.size+t;this.data[o]=s,n&&(this.reservedBit[o]=!0)};De.prototype.get=function(e,t){return this.data[e*this.size+t]};De.prototype.xor=function(e,t,s){this.data[e*this.size+t]^=s};De.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Ua=De,Ts={};(function(e){const t=te.getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const o=Math.floor(n/7)+2,a=t(n),i=a===145?26:Math.ceil((a-13)/(2*o-2))*2,l=[a-7];for(let c=1;c<o-1;c++)l[c]=l[c-1]-i;return l.push(6),l.reverse()},e.getPositions=function(n){const o=[],a=e.getRowColCoords(n),i=a.length;for(let l=0;l<i;l++)for(let c=0;c<i;c++)l===0&&c===0||l===0&&c===i-1||l===i-1&&c===0||o.push([a[l],a[c]]);return o}})(Ts);var _s={};const Oa=te.getSymbolSize,Pr=7;_s.getPositions=function(t){const s=Oa(t);return[[0,0],[s-Pr,0],[0,s-Pr]]};var Is={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},e.from=function(o){return e.isValid(o)?parseInt(o,10):void 0},e.getPenaltyN1=function(o){const a=o.size;let i=0,l=0,c=0,d=null,u=null;for(let f=0;f<a;f++){l=c=0,d=u=null;for(let b=0;b<a;b++){let p=o.get(f,b);p===d?l++:(l>=5&&(i+=t.N1+(l-5)),d=p,l=1),p=o.get(b,f),p===u?c++:(c>=5&&(i+=t.N1+(c-5)),u=p,c=1)}l>=5&&(i+=t.N1+(l-5)),c>=5&&(i+=t.N1+(c-5))}return i},e.getPenaltyN2=function(o){const a=o.size;let i=0;for(let l=0;l<a-1;l++)for(let c=0;c<a-1;c++){const d=o.get(l,c)+o.get(l,c+1)+o.get(l+1,c)+o.get(l+1,c+1);(d===4||d===0)&&i++}return i*t.N2},e.getPenaltyN3=function(o){const a=o.size;let i=0,l=0,c=0;for(let d=0;d<a;d++){l=c=0;for(let u=0;u<a;u++)l=l<<1&2047|o.get(d,u),u>=10&&(l===1488||l===93)&&i++,c=c<<1&2047|o.get(u,d),u>=10&&(c===1488||c===93)&&i++}return i*t.N3},e.getPenaltyN4=function(o){let a=0;const i=o.data.length;for(let c=0;c<i;c++)a+=o.data[c];return Math.abs(Math.ceil(a*100/i/5)-10)*t.N4};function s(n,o,a){switch(n){case e.Patterns.PATTERN000:return(o+a)%2===0;case e.Patterns.PATTERN001:return o%2===0;case e.Patterns.PATTERN010:return a%3===0;case e.Patterns.PATTERN011:return(o+a)%3===0;case e.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(a/3))%2===0;case e.Patterns.PATTERN101:return o*a%2+o*a%3===0;case e.Patterns.PATTERN110:return(o*a%2+o*a%3)%2===0;case e.Patterns.PATTERN111:return(o*a%3+(o+a)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(o,a){const i=a.size;for(let l=0;l<i;l++)for(let c=0;c<i;c++)a.isReserved(c,l)||a.xor(c,l,s(o,c,l))},e.getBestMask=function(o,a){const i=Object.keys(e.Patterns).length;let l=0,c=1/0;for(let d=0;d<i;d++){a(d),e.applyMask(d,o);const u=e.getPenaltyN1(o)+e.getPenaltyN2(o)+e.getPenaltyN3(o)+e.getPenaltyN4(o);e.applyMask(d,o),u<c&&(c=u,l=d)}return l}})(Is);var bt={};const he=xt,Ve=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],He=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];bt.getBlocksCount=function(t,s){switch(s){case he.L:return Ve[(t-1)*4+0];case he.M:return Ve[(t-1)*4+1];case he.Q:return Ve[(t-1)*4+2];case he.H:return Ve[(t-1)*4+3];default:return}};bt.getTotalCodewordsCount=function(t,s){switch(s){case he.L:return He[(t-1)*4+0];case he.M:return He[(t-1)*4+1];case he.Q:return He[(t-1)*4+2];case he.H:return He[(t-1)*4+3];default:return}};var $s={},wt={};const Te=new Uint8Array(512),nt=new Uint8Array(256);(function(){let t=1;for(let s=0;s<255;s++)Te[s]=t,nt[t]=s,t<<=1,t&256&&(t^=285);for(let s=255;s<512;s++)Te[s]=Te[s-255]})();wt.log=function(t){if(t<1)throw new Error("log("+t+")");return nt[t]};wt.exp=function(t){return Te[t]};wt.mul=function(t,s){return t===0||s===0?0:Te[nt[t]+nt[s]]};(function(e){const t=wt;e.mul=function(n,o){const a=new Uint8Array(n.length+o.length-1);for(let i=0;i<n.length;i++)for(let l=0;l<o.length;l++)a[i+l]^=t.mul(n[i],o[l]);return a},e.mod=function(n,o){let a=new Uint8Array(n);for(;a.length-o.length>=0;){const i=a[0];for(let c=0;c<o.length;c++)a[c]^=t.mul(o[c],i);let l=0;for(;l<a.length&&a[l]===0;)l++;a=a.slice(l)}return a},e.generateECPolynomial=function(n){let o=new Uint8Array([1]);for(let a=0;a<n;a++)o=e.mul(o,new Uint8Array([1,t.exp(a)]));return o}})($s);const Ps=$s;function lr(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}lr.prototype.initialize=function(t){this.degree=t,this.genPoly=Ps.generateECPolynomial(this.degree)};lr.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(t.length+this.degree);s.set(t);const n=Ps.mod(s,this.genPoly),o=this.degree-n.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(n,o),a}return n};var Da=lr,Ms={},ge={},cr={};cr.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var ie={};const Bs="[0-9]+",za="[A-Z $%*+\\-./:]+";let Ie="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ie=Ie.replace(/u/g,"\\u");const Fa="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ie+`)(?:.|[\r
]))+`;ie.KANJI=new RegExp(Ie,"g");ie.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ie.BYTE=new RegExp(Fa,"g");ie.NUMERIC=new RegExp(Bs,"g");ie.ALPHANUMERIC=new RegExp(za,"g");const Va=new RegExp("^"+Ie+"$"),Ha=new RegExp("^"+Bs+"$"),Wa=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ie.testKanji=function(t){return Va.test(t)};ie.testNumeric=function(t){return Ha.test(t)};ie.testAlphanumeric=function(t){return Wa.test(t)};(function(e){const t=cr,s=ie;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(a,i){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!t.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?a.ccBits[0]:i<27?a.ccBits[1]:a.ccBits[2]},e.getBestModeForData=function(a){return s.testNumeric(a)?e.NUMERIC:s.testAlphanumeric(a)?e.ALPHANUMERIC:s.testKanji(a)?e.KANJI:e.BYTE},e.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},e.isValid=function(a){return a&&a.bit&&a.ccBits};function n(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+o)}}e.from=function(a,i){if(e.isValid(a))return a;try{return n(a)}catch{return i}}})(ge);(function(e){const t=te,s=bt,n=xt,o=ge,a=cr,i=7973,l=t.getBCHDigit(i);function c(b,p,g){for(let h=1;h<=40;h++)if(p<=e.getCapacity(h,g,b))return h}function d(b,p){return o.getCharCountIndicator(b,p)+4}function u(b,p){let g=0;return b.forEach(function(h){const m=d(h.mode,p);g+=m+h.getBitsLength()}),g}function f(b,p){for(let g=1;g<=40;g++)if(u(b,g)<=e.getCapacity(g,p,o.MIXED))return g}e.from=function(p,g){return a.isValid(p)?parseInt(p,10):g},e.getCapacity=function(p,g,h){if(!a.isValid(p))throw new Error("Invalid QR Code version");typeof h>"u"&&(h=o.BYTE);const m=t.getSymbolTotalCodewords(p),x=s.getTotalCodewordsCount(p,g),y=(m-x)*8;if(h===o.MIXED)return y;const v=y-d(h,p);switch(h){case o.NUMERIC:return Math.floor(v/10*3);case o.ALPHANUMERIC:return Math.floor(v/11*2);case o.KANJI:return Math.floor(v/13);case o.BYTE:default:return Math.floor(v/8)}},e.getBestVersionForData=function(p,g){let h;const m=n.from(g,n.M);if(Array.isArray(p)){if(p.length>1)return f(p,m);if(p.length===0)return 1;h=p[0]}else h=p;return c(h.mode,h.getLength(),m)},e.getEncodedBits=function(p){if(!a.isValid(p)||p<7)throw new Error("Invalid QR Code version");let g=p<<12;for(;t.getBCHDigit(g)-l>=0;)g^=i<<t.getBCHDigit(g)-l;return p<<12|g}})(Ms);var Us={};const Wt=te,Os=1335,Ja=21522,Mr=Wt.getBCHDigit(Os);Us.getEncodedBits=function(t,s){const n=t.bit<<3|s;let o=n<<10;for(;Wt.getBCHDigit(o)-Mr>=0;)o^=Os<<Wt.getBCHDigit(o)-Mr;return(n<<10|o)^Ja};var Ds={};const Ya=ge;function Ne(e){this.mode=Ya.NUMERIC,this.data=e.toString()}Ne.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Ne.prototype.getLength=function(){return this.data.length};Ne.prototype.getBitsLength=function(){return Ne.getBitsLength(this.data.length)};Ne.prototype.write=function(t){let s,n,o;for(s=0;s+3<=this.data.length;s+=3)n=this.data.substr(s,3),o=parseInt(n,10),t.put(o,10);const a=this.data.length-s;a>0&&(n=this.data.substr(s),o=parseInt(n,10),t.put(o,a*3+1))};var qa=Ne;const Ka=ge,It=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Se(e){this.mode=Ka.ALPHANUMERIC,this.data=e}Se.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Se.prototype.getLength=function(){return this.data.length};Se.prototype.getBitsLength=function(){return Se.getBitsLength(this.data.length)};Se.prototype.write=function(t){let s;for(s=0;s+2<=this.data.length;s+=2){let n=It.indexOf(this.data[s])*45;n+=It.indexOf(this.data[s+1]),t.put(n,11)}this.data.length%2&&t.put(It.indexOf(this.data[s]),6)};var Ga=Se;const Xa=ge;function ke(e){this.mode=Xa.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}ke.getBitsLength=function(t){return t*8};ke.prototype.getLength=function(){return this.data.length};ke.prototype.getBitsLength=function(){return ke.getBitsLength(this.data.length)};ke.prototype.write=function(e){for(let t=0,s=this.data.length;t<s;t++)e.put(this.data[t],8)};var Qa=ke;const Za=ge,ei=te;function Ce(e){this.mode=Za.KANJI,this.data=e}Ce.getBitsLength=function(t){return t*13};Ce.prototype.getLength=function(){return this.data.length};Ce.prototype.getBitsLength=function(){return Ce.getBitsLength(this.data.length)};Ce.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let s=ei.toSJIS(this.data[t]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),e.put(s,13)}};var ti=Ce,zs={exports:{}};(function(e){var t={single_source_shortest_paths:function(s,n,o){var a={},i={};i[n]=0;var l=t.PriorityQueue.make();l.push(n,0);for(var c,d,u,f,b,p,g,h,m;!l.empty();){c=l.pop(),d=c.value,f=c.cost,b=s[d]||{};for(u in b)b.hasOwnProperty(u)&&(p=b[u],g=f+p,h=i[u],m=typeof i[u]>"u",(m||h>g)&&(i[u]=g,l.push(u,g),a[u]=d))}if(typeof o<"u"&&typeof i[o]>"u"){var x=["Could not find a path from ",n," to ",o,"."].join("");throw new Error(x)}return a},extract_shortest_path_from_predecessor_list:function(s,n){for(var o=[],a=n;a;)o.push(a),s[a],a=s[a];return o.reverse(),o},find_path:function(s,n,o){var a=t.single_source_shortest_paths(s,n,o);return t.extract_shortest_path_from_predecessor_list(a,o)},PriorityQueue:{make:function(s){var n=t.PriorityQueue,o={},a;s=s||{};for(a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o.queue=[],o.sorter=s.sorter||n.default_sorter,o},default_sorter:function(s,n){return s.cost-n.cost},push:function(s,n){var o={value:s,cost:n};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(zs);var ri=zs.exports;(function(e){const t=ge,s=qa,n=Ga,o=Qa,a=ti,i=ie,l=te,c=ri;function d(x){return unescape(encodeURIComponent(x)).length}function u(x,y,v){const S=[];let R;for(;(R=x.exec(v))!==null;)S.push({data:R[0],index:R.index,mode:y,length:R[0].length});return S}function f(x){const y=u(i.NUMERIC,t.NUMERIC,x),v=u(i.ALPHANUMERIC,t.ALPHANUMERIC,x);let S,R;return l.isKanjiModeEnabled()?(S=u(i.BYTE,t.BYTE,x),R=u(i.KANJI,t.KANJI,x)):(S=u(i.BYTE_KANJI,t.BYTE,x),R=[]),y.concat(v,S,R).sort(function(E,L){return E.index-L.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function b(x,y){switch(y){case t.NUMERIC:return s.getBitsLength(x);case t.ALPHANUMERIC:return n.getBitsLength(x);case t.KANJI:return a.getBitsLength(x);case t.BYTE:return o.getBitsLength(x)}}function p(x){return x.reduce(function(y,v){const S=y.length-1>=0?y[y.length-1]:null;return S&&S.mode===v.mode?(y[y.length-1].data+=v.data,y):(y.push(v),y)},[])}function g(x){const y=[];for(let v=0;v<x.length;v++){const S=x[v];switch(S.mode){case t.NUMERIC:y.push([S,{data:S.data,mode:t.ALPHANUMERIC,length:S.length},{data:S.data,mode:t.BYTE,length:S.length}]);break;case t.ALPHANUMERIC:y.push([S,{data:S.data,mode:t.BYTE,length:S.length}]);break;case t.KANJI:y.push([S,{data:S.data,mode:t.BYTE,length:d(S.data)}]);break;case t.BYTE:y.push([{data:S.data,mode:t.BYTE,length:d(S.data)}])}}return y}function h(x,y){const v={},S={start:{}};let R=["start"];for(let j=0;j<x.length;j++){const E=x[j],L=[];for(let k=0;k<E.length;k++){const A=E[k],$=""+j+k;L.push($),v[$]={node:A,lastCount:0},S[$]={};for(let z=0;z<R.length;z++){const M=R[z];v[M]&&v[M].node.mode===A.mode?(S[M][$]=b(v[M].lastCount+A.length,A.mode)-b(v[M].lastCount,A.mode),v[M].lastCount+=A.length):(v[M]&&(v[M].lastCount=A.length),S[M][$]=b(A.length,A.mode)+4+t.getCharCountIndicator(A.mode,y))}}R=L}for(let j=0;j<R.length;j++)S[R[j]].end=0;return{map:S,table:v}}function m(x,y){let v;const S=t.getBestModeForData(x);if(v=t.from(y,S),v!==t.BYTE&&v.bit<S.bit)throw new Error('"'+x+'" cannot be encoded with mode '+t.toString(v)+`.
 Suggested mode is: `+t.toString(S));switch(v===t.KANJI&&!l.isKanjiModeEnabled()&&(v=t.BYTE),v){case t.NUMERIC:return new s(x);case t.ALPHANUMERIC:return new n(x);case t.KANJI:return new a(x);case t.BYTE:return new o(x)}}e.fromArray=function(y){return y.reduce(function(v,S){return typeof S=="string"?v.push(m(S,null)):S.data&&v.push(m(S.data,S.mode)),v},[])},e.fromString=function(y,v){const S=f(y,l.isKanjiModeEnabled()),R=g(S),j=h(R,v),E=c.find_path(j.map,"start","end"),L=[];for(let k=1;k<E.length-1;k++)L.push(j.table[E[k]].node);return e.fromArray(p(L))},e.rawSplit=function(y){return e.fromArray(f(y,l.isKanjiModeEnabled()))}})(Ds);const yt=te,$t=xt,si=Ba,ni=Ua,oi=Ts,ai=_s,Jt=Is,Yt=bt,ii=Da,ot=Ms,li=Us,ci=ge,Pt=Ds;function di(e,t){const s=e.size,n=ai.getPositions(t);for(let o=0;o<n.length;o++){const a=n[o][0],i=n[o][1];for(let l=-1;l<=7;l++)if(!(a+l<=-1||s<=a+l))for(let c=-1;c<=7;c++)i+c<=-1||s<=i+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?e.set(a+l,i+c,!0,!0):e.set(a+l,i+c,!1,!0))}}function ui(e){const t=e.size;for(let s=8;s<t-8;s++){const n=s%2===0;e.set(s,6,n,!0),e.set(6,s,n,!0)}}function hi(e,t){const s=oi.getPositions(t);for(let n=0;n<s.length;n++){const o=s[n][0],a=s[n][1];for(let i=-2;i<=2;i++)for(let l=-2;l<=2;l++)i===-2||i===2||l===-2||l===2||i===0&&l===0?e.set(o+i,a+l,!0,!0):e.set(o+i,a+l,!1,!0)}}function mi(e,t){const s=e.size,n=ot.getEncodedBits(t);let o,a,i;for(let l=0;l<18;l++)o=Math.floor(l/3),a=l%3+s-8-3,i=(n>>l&1)===1,e.set(o,a,i,!0),e.set(a,o,i,!0)}function Mt(e,t,s){const n=e.size,o=li.getEncodedBits(t,s);let a,i;for(a=0;a<15;a++)i=(o>>a&1)===1,a<6?e.set(a,8,i,!0):a<8?e.set(a+1,8,i,!0):e.set(n-15+a,8,i,!0),a<8?e.set(8,n-a-1,i,!0):a<9?e.set(8,15-a-1+1,i,!0):e.set(8,15-a-1,i,!0);e.set(n-8,8,1,!0)}function fi(e,t){const s=e.size;let n=-1,o=s-1,a=7,i=0;for(let l=s-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!e.isReserved(o,l-c)){let d=!1;i<t.length&&(d=(t[i]>>>a&1)===1),e.set(o,l-c,d),a--,a===-1&&(i++,a=7)}if(o+=n,o<0||s<=o){o-=n,n=-n;break}}}function gi(e,t,s){const n=new si;s.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),ci.getCharCountIndicator(c.mode,e)),c.write(n)});const o=yt.getSymbolTotalCodewords(e),a=Yt.getTotalCodewordsCount(e,t),i=(o-a)*8;for(n.getLengthInBits()+4<=i&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(i-n.getLengthInBits())/8;for(let c=0;c<l;c++)n.put(c%2?17:236,8);return pi(n,e,t)}function pi(e,t,s){const n=yt.getSymbolTotalCodewords(t),o=Yt.getTotalCodewordsCount(t,s),a=n-o,i=Yt.getBlocksCount(t,s),l=n%i,c=i-l,d=Math.floor(n/i),u=Math.floor(a/i),f=u+1,b=d-u,p=new ii(b);let g=0;const h=new Array(i),m=new Array(i);let x=0;const y=new Uint8Array(e.buffer);for(let E=0;E<i;E++){const L=E<c?u:f;h[E]=y.slice(g,g+L),m[E]=p.encode(h[E]),g+=L,x=Math.max(x,L)}const v=new Uint8Array(n);let S=0,R,j;for(R=0;R<x;R++)for(j=0;j<i;j++)R<h[j].length&&(v[S++]=h[j][R]);for(R=0;R<b;R++)for(j=0;j<i;j++)v[S++]=m[j][R];return v}function xi(e,t,s,n){let o;if(Array.isArray(e))o=Pt.fromArray(e);else if(typeof e=="string"){let d=t;if(!d){const u=Pt.rawSplit(e);d=ot.getBestVersionForData(u,s)}o=Pt.fromString(e,d||40)}else throw new Error("Invalid data");const a=ot.getBestVersionForData(o,s);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=a;else if(t<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const i=gi(t,s,o),l=yt.getSymbolSize(t),c=new ni(l);return di(c,t),ui(c),hi(c,t),Mt(c,s,0),t>=7&&mi(c,t),fi(c,i),isNaN(n)&&(n=Jt.getBestMask(c,Mt.bind(null,c,s))),Jt.applyMask(n,c),Mt(c,s,n),{modules:c,version:t,errorCorrectionLevel:s,maskPattern:n,segments:o}}Ls.create=function(t,s){if(typeof t>"u"||t==="")throw new Error("No input text");let n=$t.M,o,a;return typeof s<"u"&&(n=$t.from(s.errorCorrectionLevel,$t.M),o=ot.from(s.version),a=Jt.from(s.maskPattern),s.toSJISFunc&&yt.setToSJISFunction(s.toSJISFunc)),xi(t,o,n,a)};var Fs={},dr={};(function(e){function t(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+s);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(a){return[a,a]}))),n.length===6&&n.push("F","F");const o=parseInt(n.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const o=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,a=n.width&&n.width>=21?n.width:void 0,i=n.scale||4;return{width:a,scale:a?4:i,margin:o,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,o){return o.width&&o.width>=n+o.margin*2?o.width/(n+o.margin*2):o.scale},e.getImageWidth=function(n,o){const a=e.getScale(n,o);return Math.floor((n+o.margin*2)*a)},e.qrToImageData=function(n,o,a){const i=o.modules.size,l=o.modules.data,c=e.getScale(i,a),d=Math.floor((i+a.margin*2)*c),u=a.margin*c,f=[a.color.light,a.color.dark];for(let b=0;b<d;b++)for(let p=0;p<d;p++){let g=(b*d+p)*4,h=a.color.light;if(b>=u&&p>=u&&b<d-u&&p<d-u){const m=Math.floor((b-u)/c),x=Math.floor((p-u)/c);h=f[l[m*i+x]?1:0]}n[g++]=h.r,n[g++]=h.g,n[g++]=h.b,n[g]=h.a}}})(dr);(function(e){const t=dr;function s(o,a,i){o.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=i,a.width=i,a.style.height=i+"px",a.style.width=i+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(a,i,l){let c=l,d=i;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),i||(d=n()),c=t.getOptions(c);const u=t.getImageWidth(a.modules.size,c),f=d.getContext("2d"),b=f.createImageData(u,u);return t.qrToImageData(b.data,a,c),s(f,d,u),f.putImageData(b,0,0),d},e.renderToDataURL=function(a,i,l){let c=l;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),c||(c={});const d=e.render(a,i,c),u=c.type||"image/png",f=c.rendererOpts||{};return d.toDataURL(u,f.quality)}})(Fs);var Vs={};const bi=dr;function Br(e,t){const s=e.a/255,n=t+'="'+e.hex+'"';return s<1?n+" "+t+'-opacity="'+s.toFixed(2).slice(1)+'"':n}function Bt(e,t,s){let n=e+t;return typeof s<"u"&&(n+=" "+s),n}function wi(e,t,s){let n="",o=0,a=!1,i=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),d=Math.floor(l/t);!c&&!a&&(a=!0),e[l]?(i++,l>0&&c>0&&e[l-1]||(n+=a?Bt("M",c+s,.5+d+s):Bt("m",o,0),o=0,a=!1),c+1<t&&e[l+1]||(n+=Bt("h",i),i=0)):o++}return n}Vs.render=function(t,s,n){const o=bi.getOptions(s),a=t.modules.size,i=t.modules.data,l=a+o.margin*2,c=o.color.light.a?"<path "+Br(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+Br(o.color.dark,"stroke")+' d="'+wi(i,a,o.margin)+'"/>',u='viewBox="0 0 '+l+" "+l+'"',b='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof n=="function"&&n(null,b),b};const yi=Pa,qt=Ls,Hs=Fs,vi=Vs;function ur(e,t,s,n,o){const a=[].slice.call(arguments,1),i=a.length,l=typeof a[i-1]=="function";if(!l&&!yi())throw new Error("Callback required as last argument");if(l){if(i<2)throw new Error("Too few arguments provided");i===2?(o=s,s=t,t=n=void 0):i===3&&(t.getContext&&typeof o>"u"?(o=n,n=void 0):(o=n,n=s,s=t,t=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(s=t,t=n=void 0):i===2&&!t.getContext&&(n=s,s=t,t=void 0),new Promise(function(c,d){try{const u=qt.create(s,n);c(e(u,t,n))}catch(u){d(u)}})}try{const c=qt.create(s,n);o(null,e(c,t,n))}catch(c){o(c)}}Oe.create=qt.create;Oe.toCanvas=ur.bind(null,Hs.render);Oe.toDataURL=ur.bind(null,Hs.renderToDataURL);Oe.toString=ur.bind(null,function(e,t,s){return vi.render(e,s)});var Ws={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function s(){for(var a="",i=0;i<arguments.length;i++){var l=arguments[i];l&&(a=o(a,n(l)))}return a}function n(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return s.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var i="";for(var l in a)t.call(a,l)&&a[l]&&(i=o(i,l));return i}function o(a,i){return i?a?a+" "+i:a+i:a}e.exports?(s.default=s,e.exports=s):window.classNames=s})()})(Ws);var ji=Ws.exports;const Js=zr(ji);var Kt={exports:{}},Gt={exports:{}},$e=1e3,Pe=$e*60,Me=Pe*60,Be=Me*24,Ni=Be*365.25,Si=function(e,t){t=t||{};var s=typeof e;if(s==="string"&&e.length>0)return ki(e);if(s==="number"&&isNaN(e)===!1)return t.long?Ei(e):Ci(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function ki(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var s=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return s*Ni;case"days":case"day":case"d":return s*Be;case"hours":case"hour":case"hrs":case"hr":case"h":return s*Me;case"minutes":case"minute":case"mins":case"min":case"m":return s*Pe;case"seconds":case"second":case"secs":case"sec":case"s":return s*$e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function Ci(e){return e>=Be?Math.round(e/Be)+"d":e>=Me?Math.round(e/Me)+"h":e>=Pe?Math.round(e/Pe)+"m":e>=$e?Math.round(e/$e)+"s":e+"ms"}function Ei(e){return We(e,Be,"day")||We(e,Me,"hour")||We(e,Pe,"minute")||We(e,$e,"second")||e+" ms"}function We(e,t,s){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+s:Math.ceil(e/t)+" "+s+"s"}(function(e,t){t=e.exports=o.debug=o.default=o,t.coerce=c,t.disable=i,t.enable=a,t.enabled=l,t.humanize=Si,t.names=[],t.skips=[],t.formatters={};var s;function n(d){var u=0,f;for(f in d)u=(u<<5)-u+d.charCodeAt(f),u|=0;return t.colors[Math.abs(u)%t.colors.length]}function o(d){function u(){if(u.enabled){var f=u,b=+new Date,p=b-(s||b);f.diff=p,f.prev=s,f.curr=b,s=b;for(var g=new Array(arguments.length),h=0;h<g.length;h++)g[h]=arguments[h];g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var m=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(y,v){if(y==="%%")return y;m++;var S=t.formatters[v];if(typeof S=="function"){var R=g[m];y=S.call(f,R),g.splice(m,1),m--}return y}),t.formatArgs.call(f,g);var x=u.log||t.log||console.log.bind(console);x.apply(f,g)}}return u.namespace=d,u.enabled=t.enabled(d),u.useColors=t.useColors(),u.color=n(d),typeof t.init=="function"&&t.init(u),u}function a(d){t.save(d),t.names=[],t.skips=[];for(var u=(typeof d=="string"?d:"").split(/[\s,]+/),f=u.length,b=0;b<f;b++)u[b]&&(d=u[b].replace(/\*/g,".*?"),d[0]==="-"?t.skips.push(new RegExp("^"+d.substr(1)+"$")):t.names.push(new RegExp("^"+d+"$")))}function i(){t.enable("")}function l(d){var u,f;for(u=0,f=t.skips.length;u<f;u++)if(t.skips[u].test(d))return!1;for(u=0,f=t.names.length;u<f;u++)if(t.names[u].test(d))return!0;return!1}function c(d){return d instanceof Error?d.stack||d.message:d}})(Gt,Gt.exports);var Ri=Gt.exports;(function(e,t){t=e.exports=Ri,t.log=o,t.formatArgs=n,t.save=a,t.load=i,t.useColors=s,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function s(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};function n(c){var d=this.useColors;if(c[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+c[0]+(d?"%c ":" ")+"+"+t.humanize(this.diff),!!d){var u="color: "+this.color;c.splice(1,0,u,"color: inherit");var f=0,b=0;c[0].replace(/%[a-zA-Z%]/g,function(p){p!=="%%"&&(f++,p==="%c"&&(b=f))}),c.splice(b,0,u)}}function o(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(c){try{c==null?t.storage.removeItem("debug"):t.storage.debug=c}catch{}}function i(){var c;try{c=t.storage.debug}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}t.enable(i());function l(){try{return window.localStorage}catch{}}})(Kt,Kt.exports);var Li=Kt.exports,Ur=Li("jsonp"),Ai=Ii,Ti=0;function _i(){}function Ii(e,t,s){typeof t=="function"&&(s=t,t={}),t||(t={});var n=t.prefix||"__jp",o=t.name||n+Ti++,a=t.param||"callback",i=t.timeout!=null?t.timeout:6e4,l=encodeURIComponent,c=document.getElementsByTagName("script")[0]||document.head,d,u;i&&(u=setTimeout(function(){f(),s&&s(new Error("Timeout"))},i));function f(){d.parentNode&&d.parentNode.removeChild(d),window[o]=_i,u&&clearTimeout(u)}function b(){window[o]&&f()}return window[o]=function(p){Ur("jsonp got",p),f(),s&&s(null,p)},e+=(~e.indexOf("?")?"&":"?")+a+"="+l(o),e=e.replace("?&","?"),Ur('jsonp req "%s"',e),d=document.createElement("script"),d.src=e,c.parentNode.insertBefore(d,c),b}const be=zr(Ai);var $i=Object.defineProperty,Pi=Object.defineProperties,Mi=Object.getOwnPropertyDescriptors,at=Object.getOwnPropertySymbols,Ys=Object.prototype.hasOwnProperty,qs=Object.prototype.propertyIsEnumerable,Or=(e,t,s)=>t in e?$i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ee=(e,t)=>{for(var s in t||(t={}))Ys.call(t,s)&&Or(e,s,t[s]);if(at)for(var s of at(t))qs.call(t,s)&&Or(e,s,t[s]);return e},vt=(e,t)=>Pi(e,Mi(t)),jt=(e,t)=>{var s={};for(var n in e)Ys.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&at)for(var n of at(e))t.indexOf(n)<0&&qs.call(e,n)&&(s[n]=e[n]);return s};function Nt(e){return s=>{var n=s,{bgStyle:o={},borderRadius:a=0,iconFillColor:i="white",round:l=!1,size:c=64}=n,d=jt(n,["bgStyle","borderRadius","iconFillColor","round","size"]);return r.jsxs("svg",vt(ee({viewBox:"0 0 64 64",width:c,height:c},d),{children:[l?r.jsx("circle",{cx:"32",cy:"32",r:"32",fill:e.color,style:o}):r.jsx("rect",{width:"64",height:"64",rx:a,ry:a,fill:e.color,style:o}),r.jsx("path",{d:e.path,fill:i})]}))}}class Bi extends Error{constructor(t){super(t),this.name="AssertionError"}}function F(e,t){if(!e)throw new Bi(t)}function D(e){const t=Object.entries(e).filter(([,s])=>s!=null).map(([s,n])=>`${encodeURIComponent(s)}=${encodeURIComponent(String(n))}`);return t.length>0?`?${t.join("&")}`:""}const Ui=e=>!!e&&(typeof e=="object"||typeof e=="function")&&"then"in e&&typeof e.then=="function",Oi=(e,t)=>({left:window.outerWidth/2+(window.screenX||window.screenLeft||0)-e/2,top:window.outerHeight/2+(window.screenY||window.screenTop||0)-t/2}),Di=(e,t)=>({top:(window.screen.height-t)/2,left:(window.screen.width-e)/2});function zi(e,t,s){var n=t,{height:o,width:a}=n,i=jt(n,["height","width"]);const l=ee({height:o,width:a,location:"no",toolbar:"no",status:"no",directories:"no",menubar:"no",scrollbars:"yes",resizable:"no",centerscreen:"yes",chrome:"yes"},i),c=window.open(e,"",Object.keys(l).map(d=>`${d}=${l[d]}`).join(", "));if(s){const d=window.setInterval(()=>{try{(c===null||c.closed)&&(window.clearInterval(d),s(c))}catch(u){console.error(u)}},1e3)}return c}function Fi(e){var t=e,{beforeOnClick:s,children:n,className:o,disabled:a,disabledStyle:i={opacity:.6},forwardedRef:l,htmlTitle:c,networkLink:d,networkName:u,onClick:f,onShareWindowClose:b,openShareDialogOnClick:p=!0,opts:g,resetButtonStyle:h=!0,style:m,title:x,url:y,windowHeight:v=400,windowPosition:S="windowCenter",windowWidth:R=550}=t,j=jt(t,["beforeOnClick","children","className","disabled","disabledStyle","forwardedRef","htmlTitle","networkLink","networkName","onClick","onShareWindowClose","openShareDialogOnClick","opts","resetButtonStyle","style","title","url","windowHeight","windowPosition","windowWidth"]);const E=async A=>{const $=d(y,g);if(!a){if(A.preventDefault(),s){const z=s();Ui(z)&&await z}if(p){const z=ee({height:v,width:R},S==="windowCenter"?Oi(R,v):Di(R,v));zi($,z,b)}f&&f(A,$)}},L=Js("react-share__ShareButton",{"react-share__ShareButton--disabled":!!a,disabled:!!a},o),k=ee(ee(h?{backgroundColor:"transparent",border:"none",padding:0,font:"inherit",color:"inherit",cursor:"pointer"}:{},m),a&&i);return r.jsx("button",vt(ee({},j),{className:L,onClick:E,ref:l,style:k,title:c,children:n}))}function V(e,t,s,n){const o=(a,i)=>{const l=s(a),c=ee({},a);return Object.keys(l).forEach(u=>{delete c[u]}),r.jsx(Fi,vt(ee(ee({},n),c),{forwardedRef:i,networkName:e,networkLink:t,opts:l}))};return o.displayName=`ShareButton-${e}`,N.forwardRef(o)}function Vi(e,{title:t,separator:s}){return F(e,"bluesky.url"),"https://bsky.app/intent/compose"+D({text:t?t+s+e:e})}V("bluesky",Vi,e=>({title:e.title,separator:e.separator||" "}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function Hi(e,{subject:t,body:s,separator:n}){return"mailto:"+D({subject:t,body:s?s+n+e:e})}V("email",Hi,e=>({subject:e.subject,body:e.body,separator:e.separator||" "}),{openShareDialogOnClick:!1,onClick:(e,t)=>{window.location.href=t}});const Wi=Nt({color:"#0965FE",path:"M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z"});function Ji(e,{appId:t,redirectUri:s,to:n}){return"https://www.facebook.com/dialog/send"+D({link:e,redirect_uri:s||e,app_id:t,to:n})}V("facebookmessenger",Ji,e=>({appId:e.appId,redirectUri:e.redirectUri,to:e.to}),{windowWidth:1e3,windowHeight:820});function Yi(e,{hashtag:t}){return F(e,"facebook.url"),"https://www.facebook.com/sharer/sharer.php"+D({u:e,hashtag:t})}const qi=V("facebook",Yi,e=>({hashtag:e.hashtag}),{windowWidth:550,windowHeight:400});function Ki(){const e=N.useRef(!1);return N.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),N.useCallback(()=>e.current,[])}function Gi(e){var t=e,{children:s=b=>b,className:n,getCount:o,url:a}=t,i=jt(t,["children","className","getCount","url"]);const l=Ki(),[c,d]=N.useState(void 0),[u,f]=N.useState(!1);return N.useEffect(()=>{f(!0),o(a,b=>{l()&&(d(b),f(!1))})},[a]),r.jsx("span",vt(ee({className:Js("react-share__ShareCount",n)},i),{children:!u&&c!==void 0&&s(c)}))}function we(e){const t=s=>r.jsx(Gi,ee({getCount:e},s));return t.displayName=`ShareCount(${e.name})`,t}function Xi(e,t){const s=`https://graph.facebook.com/?id=${e}&fields=og_object{engagement}`;be(s,(n,o)=>{t(!n&&o&&o.og_object&&o.og_object.engagement?o.og_object.engagement.count:void 0)})}we(Xi);function Qi(e,{title:t}){return F(e,"hatena.url"),`http://b.hatena.ne.jp/add?mode=confirm&url=${e}&title=${t}`}V("hatena",Qi,e=>({title:e.title}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function Zi(e,t){be("https://bookmark.hatenaapis.com/count/entry"+D({url:e}),(n,o)=>{t(o??void 0)})}we(Zi);function el(e,{title:t,description:s}){return F(e,"instapaper.url"),"http://www.instapaper.com/hello2"+D({url:e,title:t,description:s})}V("instapaper",el,e=>({title:e.title,description:e.description}),{windowWidth:500,windowHeight:500,windowPosition:"windowCenter"});const tl=Nt({color:"#00b800",path:"M52.62 30.138c0 3.693-1.432 7.019-4.42 10.296h.001c-4.326 4.979-14 11.044-16.201 11.972-2.2.927-1.876-.591-1.786-1.112l.294-1.765c.069-.527.142-1.343-.066-1.865-.232-.574-1.146-.872-1.817-1.016-9.909-1.31-17.245-8.238-17.245-16.51 0-9.226 9.251-16.733 20.62-16.733 11.37 0 20.62 7.507 20.62 16.733zM27.81 25.68h-1.446a.402.402 0 0 0-.402.401v8.985c0 .221.18.4.402.4h1.446a.401.401 0 0 0 .402-.4v-8.985a.402.402 0 0 0-.402-.401zm9.956 0H36.32a.402.402 0 0 0-.402.401v5.338L31.8 25.858a.39.39 0 0 0-.031-.04l-.002-.003-.024-.025-.008-.007a.313.313 0 0 0-.032-.026.255.255 0 0 1-.021-.014l-.012-.007-.021-.012-.013-.006-.023-.01-.013-.005-.024-.008-.014-.003-.023-.005-.017-.002-.021-.003-.021-.002h-1.46a.402.402 0 0 0-.402.401v8.985c0 .221.18.4.402.4h1.446a.401.401 0 0 0 .402-.4v-5.337l4.123 5.568c.028.04.063.072.101.099l.004.003a.236.236 0 0 0 .025.015l.012.006.019.01a.154.154 0 0 1 .019.008l.012.004.028.01.005.001a.442.442 0 0 0 .104.013h1.446a.4.4 0 0 0 .401-.4v-8.985a.402.402 0 0 0-.401-.401zm-13.442 7.537h-3.93v-7.136a.401.401 0 0 0-.401-.401h-1.447a.4.4 0 0 0-.401.401v8.984a.392.392 0 0 0 .123.29c.072.068.17.111.278.111h5.778a.4.4 0 0 0 .401-.401v-1.447a.401.401 0 0 0-.401-.401zm21.429-5.287c.222 0 .401-.18.401-.402v-1.446a.401.401 0 0 0-.401-.402h-5.778a.398.398 0 0 0-.279.113l-.005.004-.006.008a.397.397 0 0 0-.111.276v8.984c0 .108.043.206.112.278l.005.006a.401.401 0 0 0 .284.117h5.778a.4.4 0 0 0 .401-.401v-1.447a.401.401 0 0 0-.401-.401h-3.93v-1.519h3.93c.222 0 .401-.18.401-.402V29.85a.401.401 0 0 0-.401-.402h-3.93V27.93h3.93z"});function rl(e,{title:t}){return F(e,"line.url"),"https://social-plugins.line.me/lineit/share"+D({url:e,text:t})}const sl=V("line",rl,e=>({title:e.title}),{windowWidth:500,windowHeight:500});function nl(e,{title:t,summary:s,source:n}){return F(e,"linkedin.url"),"https://linkedin.com/shareArticle"+D({url:e,mini:"true",title:t,summary:s,source:n})}V("linkedin",nl,({title:e,summary:t,source:s})=>({title:e,summary:t,source:s}),{windowWidth:750,windowHeight:600});function ol(e,{title:t,description:s}){return F(e,"livejournal.url"),"https://www.livejournal.com/update.bml"+D({subject:t,event:s})}V("livejournal",ol,e=>({title:e.title,description:e.description}),{windowWidth:660,windowHeight:460});function al(e,{title:t,description:s,imageUrl:n}){return F(e,"mailru.url"),"https://connect.mail.ru/share"+D({url:e,title:t,description:s,image_url:n})}V("mailru",al,e=>({title:e.title,description:e.description,imageUrl:e.imageUrl}),{windowWidth:660,windowHeight:460});function il(e,{title:t,description:s,image:n}){return F(e,"ok.url"),"https://connect.ok.ru/offer"+D({url:e,title:t,description:s,imageUrl:n})}V("ok",il,e=>({title:e.title,description:e.description,image:e.image}),{windowWidth:588,windowHeight:480,windowPosition:"screenCenter"});function ll(e,t){window.OK||(window.OK={Share:{count:function(a,i){var l,c;(c=(l=window.OK.callbacks)[a])==null||c.call(l,i)}},callbacks:[]});const s="https://connect.ok.ru/dk",n=window.OK.callbacks.length;return window.ODKL={updateCount(o,a){var i,l;const c=o===""?0:parseInt(o.replace("react-share-",""),10);(l=(i=window.OK.callbacks)[c])==null||l.call(i,a===""?void 0:parseInt(a,10))}},window.OK.callbacks.push(t),be(s+D({"st.cmd":"extLike",uid:`react-share-${n}`,ref:e}))}we(ll);function cl(e,{media:t,description:s,pinId:n}){return n?`https://pinterest.com/pin/${n}/repin/x/`:(F(e,"pinterest.url"),F(t,"pinterest.media"),"https://pinterest.com/pin/create/button/"+D({url:e,media:t,description:s}))}V("pinterest",cl,e=>({media:e.media,description:e.description,pinId:e.pinId}),{windowWidth:1e3,windowHeight:730});function dl(e,t){be("https://api.pinterest.com/v1/urls/count.json"+D({url:e}),(n,o)=>{t(o?o.count:void 0)})}we(dl);function ul(e,{title:t}){return F(e,"pocket.url"),"https://getpocket.com/save"+D({url:e,title:t})}V("pocket",ul,e=>({title:e.title}),{windowWidth:500,windowHeight:500});function hl(e,{title:t}){return F(e,"reddit.url"),"https://www.reddit.com/web/submit"+D({url:e,title:t})}V("reddit",hl,e=>({title:e.title}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function ml(e,{title:t}){return F(e,"gab.url"),"https://gab.com/compose"+D({url:e,text:t})}V("gab",ml,e=>({title:e.title}),{windowWidth:660,windowHeight:640,windowPosition:"windowCenter"});function fl(e,t){const s=`https://www.reddit.com/api/info.json?limit=1&url=${e}`;be(s,{param:"jsonp"},(n,o)=>{t(!n&&o&&o.data&&o.data.children.length>0&&o.data.children[0].data.score?o.data.children[0].data.score:void 0)})}we(fl);function gl(e,{title:t}){return F(e,"telegram.url"),"https://telegram.me/share/url"+D({url:e,text:t})}V("telegram",gl,e=>({title:e.title}),{windowWidth:550,windowHeight:400});function pl(e,{title:t}){return F(e,"threads.url"),"https://threads.net/intent/post"+D({url:e,text:t})}V("threads",pl,e=>({title:e.title}),{windowWidth:550,windowHeight:600});function xl(e,{title:t,caption:s,tags:n,posttype:o}){return F(e,"tumblr.url"),"https://www.tumblr.com/widgets/share/tool"+D({canonicalUrl:e,title:t,caption:s,tags:n,posttype:o})}V("tumblr",xl,e=>({title:e.title,tags:(e.tags||[]).join(","),caption:e.caption,posttype:e.posttype||"link"}),{windowWidth:660,windowHeight:460});function bl(e,t){return be("https://api.tumblr.com/v2/share/stats"+D({url:e}),(n,o)=>{t(!n&&o&&o.response?o.response.note_count:void 0)})}we(bl);const wl=Nt({color:"#00aced",path:"M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z"});function yl(e,{title:t,via:s,hashtags:n=[],related:o=[]}){return F(e,"twitter.url"),F(Array.isArray(n),"twitter.hashtags is not an array"),F(Array.isArray(o),"twitter.related is not an array"),"https://twitter.com/intent/tweet"+D({url:e,text:t,via:s,hashtags:n.length>0?n.join(","):void 0,related:o.length>0?o.join(","):void 0})}const vl=V("twitter",yl,e=>({hashtags:e.hashtags,title:e.title,via:e.via,related:e.related}),{windowWidth:550,windowHeight:400});function jl(e,{title:t,separator:s}){return F(e,"viber.url"),"viber://forward"+D({text:t?t+s+e:e})}V("viber",jl,e=>({title:e.title,separator:e.separator||" "}),{windowWidth:660,windowHeight:460});function Nl(e,{title:t,image:s,noParse:n,noVkLinks:o}){return F(e,"vk.url"),"https://vk.com/share.php"+D({url:e,title:t,image:s,noparse:n?1:0,no_vk_links:o?1:0})}V("vk",Nl,e=>({title:e.title,image:e.image,noParse:e.noParse,noVkLinks:e.noVkLinks}),{windowWidth:660,windowHeight:460});function Sl(e,t){window.VK||(window.VK={}),window.VK.Share={count:(o,a)=>{var i,l;return(l=(i=window.VK.callbacks)==null?void 0:i[o])==null?void 0:l.call(i,a)}},window.VK.callbacks=[];const s="https://vk.com/share.php",n=window.VK.callbacks.length;return window.VK.callbacks.push(t),be(s+D({act:"count",index:n,url:e}))}we(Sl);function kl(e,{title:t,image:s}){return F(e,"weibo.url"),"http://service.weibo.com/share/share.php"+D({url:e,title:t,pic:s})}V("weibo",kl,e=>({title:e.title,image:e.image}),{windowWidth:660,windowHeight:550,windowPosition:"screenCenter"});const Cl=Nt({color:"#25D366",path:"m42.32286,33.93287c-0.5178,-0.2589 -3.04726,-1.49644 -3.52105,-1.66732c-0.4712,-0.17346 -0.81554,-0.2589 -1.15987,0.2589c-0.34175,0.51004 -1.33075,1.66474 -1.63108,2.00648c-0.30032,0.33658 -0.60064,0.36247 -1.11327,0.12945c-0.5178,-0.2589 -2.17994,-0.80259 -4.14759,-2.56312c-1.53269,-1.37217 -2.56312,-3.05503 -2.86603,-3.57283c-0.30033,-0.5178 -0.03366,-0.80259 0.22524,-1.06149c0.23301,-0.23301 0.5178,-0.59547 0.7767,-0.90616c0.25372,-0.31068 0.33657,-0.5178 0.51262,-0.85437c0.17088,-0.36246 0.08544,-0.64725 -0.04402,-0.90615c-0.12945,-0.2589 -1.15987,-2.79613 -1.58964,-3.80584c-0.41424,-1.00971 -0.84142,-0.88027 -1.15987,-0.88027c-0.29773,-0.02588 -0.64208,-0.02588 -0.98382,-0.02588c-0.34693,0 -0.90616,0.12945 -1.37736,0.62136c-0.4712,0.5178 -1.80194,1.76053 -1.80194,4.27186c0,2.51134 1.84596,4.945 2.10227,5.30747c0.2589,0.33657 3.63497,5.51458 8.80262,7.74113c1.23237,0.5178 2.1903,0.82848 2.94111,1.08738c1.23237,0.38836 2.35599,0.33657 3.24402,0.20712c0.99159,-0.15534 3.04985,-1.24272 3.47963,-2.45956c0.44013,-1.21683 0.44013,-2.22654 0.31068,-2.45955c-0.12945,-0.23301 -0.46601,-0.36247 -0.98382,-0.59548m-9.40068,12.84407l-0.02589,0c-3.05503,0 -6.08417,-0.82849 -8.72495,-2.38189l-0.62136,-0.37023l-6.47252,1.68286l1.73463,-6.29129l-0.41424,-0.64725c-1.70875,-2.71846 -2.6149,-5.85116 -2.6149,-9.07706c0,-9.39809 7.68934,-17.06155 17.15993,-17.06155c4.58253,0 8.88029,1.78642 12.11655,5.02268c3.23625,3.21036 5.02267,7.50812 5.02267,12.06476c-0.0078,9.3981 -7.69712,17.06155 -17.14699,17.06155m14.58906,-31.58846c-3.93529,-3.80584 -9.1133,-5.95471 -14.62789,-5.95471c-11.36055,0 -20.60848,9.2065 -20.61625,20.52564c0,3.61684 0.94757,7.14565 2.75211,10.26282l-2.92557,10.63564l10.93337,-2.85309c3.0136,1.63108 6.4052,2.4958 9.85634,2.49839l0.01037,0c11.36574,0 20.61884,-9.2091 20.62403,-20.53082c0,-5.48093 -2.14111,-10.64081 -6.03239,-14.51915"});function El(){return/(android|iphone|ipad|mobile)/i.test(navigator.userAgent)}function Rl(e,{title:t,separator:s}){return F(e,"whatsapp.url"),"https://"+(El()?"api":"web")+".whatsapp.com/send"+D({text:t?t+s+e:e})}const Ll=V("whatsapp",Rl,e=>({title:e.title,separator:e.separator||" "}),{windowWidth:550,windowHeight:400});function Al(e,{quote:t,hashtag:s}){return F(e,"workplace.url"),"https://work.facebook.com/sharer.php"+D({u:e,quote:t,hashtag:s})}V("workplace",Al,e=>({quote:e.quote,hashtag:e.hashtag}),{windowWidth:550,windowHeight:400});function Tl({username:e,displayName:t,bio:s,className:n=""}){const[o,a]=N.useState(""),[i,l]=N.useState(!1),[c,d]=N.useState(!1),u=`${window.location.origin}/users/${e}`,f=`${t}の音楽名刺をチェック！ ${s?`"${s}"`:""}`;N.useEffect(()=>{(async()=>{try{const g=await Oe.toDataURL(u,{width:256,margin:2,color:{dark:"#000000",light:"#ffffff"}});a(g)}catch(g){console.error("QRコード生成エラー:",g)}})()},[u]);const b=async()=>{try{await navigator.clipboard.writeText(u),d(!0),setTimeout(()=>d(!1),2e3)}catch(p){console.error("クリップボードコピーエラー:",p)}};return r.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 ${n}`,children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),"プロフィールを共有"]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"プロフィールURL"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:u,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"}),r.jsx("button",{onClick:b,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c?"bg-green-100 text-green-800":"bg-blue-500 text-white hover:bg-blue-600"}`,children:c?"✓ コピー済み":"コピー"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("button",{onClick:()=>l(!i),className:"flex items-center text-blue-600 hover:text-blue-800 text-sm font-medium",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"QRコードを",i?"非表示":"表示"]}),i&&o&&r.jsxs("div",{className:"mt-3 text-center",children:[r.jsx("img",{src:o,alt:"プロフィールQRコード",className:"mx-auto border border-gray-200 rounded-lg"}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"スマートフォンでQRコードを読み取ってプロフィールにアクセス"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"SNSで共有"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(vl,{url:u,title:f,children:r.jsx(wl,{size:36,round:!0})}),r.jsx(qi,{url:u,title:f,children:r.jsx(Wi,{size:36,round:!0})}),r.jsx(sl,{url:u,title:f,children:r.jsx(tl,{size:36,round:!0})}),r.jsx(Ll,{url:u,title:f,children:r.jsx(Cl,{size:36,round:!0})})]})]})]})}function _l({songs:e,className:t=""}){const n=(()=>{const d=e.length,u={},f={},b={};let p=0,g=0;e.forEach(m=>{if(m.genre&&(u[m.genre]=(u[m.genre]||0)+1),f[m.artist]=(f[m.artist]||0)+1,m.releaseYear){const x=`${Math.floor(m.releaseYear/10)*10}年代`;b[x]=(b[x]||0)+1,p+=m.releaseYear,g++}});const h=g>0?Math.round(p/g):0;return{totalSongs:d,genreDistribution:u,artistDistribution:f,decadeDistribution:b,averageReleaseYear:h}})(),o=(d,u=5)=>Object.entries(d).sort(([,f],[,b])=>b-f).slice(0,u),a=o(n.genreDistribution),i=o(n.artistDistribution),l=o(n.decadeDistribution),c=(d,u)=>u>0?Math.round(d/u*100):0;return r.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 ${t}`,children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"音楽統計"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"基本情報"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"総楽曲数"}),r.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[n.totalSongs,"曲"]})]}),n.averageReleaseYear>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"平均リリース年"}),r.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[n.averageReleaseYear,"年"]})]})]})]}),a.length>0&&r.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-purple-800 mb-2",children:"好きなジャンル"}),r.jsx("div",{className:"space-y-2",children:a.map(([d,u])=>r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:d}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-12 h-2 bg-purple-200 rounded-full",children:r.jsx("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${c(u,n.totalSongs)}%`}})}),r.jsxs("span",{className:"text-xs text-purple-600 font-medium w-8 text-right",children:[c(u,n.totalSongs),"%"]})]})]},d))})]}),i.length>0&&r.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-green-800 mb-2",children:"好きなアーティスト"}),r.jsx("div",{className:"space-y-2",children:i.map(([d,u])=>r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600 truncate mr-2",children:d}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-12 h-2 bg-green-200 rounded-full",children:r.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${c(u,n.totalSongs)}%`}})}),r.jsxs("span",{className:"text-xs text-green-600 font-medium w-8 text-right",children:[c(u,n.totalSongs),"%"]})]})]},d))})]}),l.length>0&&r.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-orange-800 mb-2",children:"好きな年代"}),r.jsx("div",{className:"space-y-2",children:l.map(([d,u])=>r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:d}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-12 h-2 bg-orange-200 rounded-full",children:r.jsx("div",{className:"h-full bg-orange-500 rounded-full",style:{width:`${c(u,n.totalSongs)}%`}})}),r.jsxs("span",{className:"text-xs text-orange-600 font-medium w-8 text-right",children:[c(u,n.totalSongs),"%"]})]})]},d))})]})]}),n.totalSongs<3&&r.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-yellow-800",children:"💡 楽曲を追加するとより詳細な統計が表示されます"})})]})}const Il="/api/youtube/search",Xt={searchMusic:async(e,t=5)=>{try{const s=await fetch(`${Il}?query=${encodeURIComponent(e)}&maxResults=${t}`);if(!s.ok){const o=await s.json().catch(()=>({}));throw new Error(`YouTube検索失敗: ${s.status} ${o.error||""}`)}return(await s.json()).results||[]}catch(s){throw console.error("YouTube検索エラー:",s),s}},searchTrackByArtist:async(e,t,s=3)=>{const n=[`${e} ${t} official`,`${e} ${t} music video`,`${e} ${t} audio`,`${t} ${e}`];for(const o of n)try{const a=await Xt.searchMusic(o,s);if(a.length>0)return a.map(l=>({...l,score:Xt.calculateRelevanceScore(l,e,t)})).sort((l,c)=>c.score-l.score)}catch(a){console.warn(`クエリ失敗: ${o}`,a);continue}return[]},calculateRelevanceScore:(e,t,s)=>{let n=0;const o=e.title.toLowerCase(),a=e.channelTitle.toLowerCase(),i=t.toLowerCase(),l=s.toLowerCase();return o.includes(i)&&(n+=30),(a.includes(l)||o.includes(l))&&(n+=25),(a.includes("official")||o.includes("official"))&&(n+=20),(o.includes("music video")||o.includes("mv"))&&(n+=15),(o.includes("audio")||o.includes("lyric"))&&(n+=10),(o.includes("live")||o.includes("concert"))&&(n-=10),(o.includes("cover")||o.includes("remix"))&&(n-=5),n}};function $l(){const{username:e}=Fr(),[t,s]=N.useState(null),[n,o]=N.useState(!0),[a,i]=N.useState(null),[l,c]=N.useState(!1),[d,u]=N.useState(!1),[f,b]=N.useState(!1),[p,g]=N.useState(!1);N.useEffect(()=>{e&&h(e)},[e]);const h=async j=>{try{const E=await ve.loadUser(j);if(E)s(E),console.log(`✅ ユーザー「${j}」のデータを読み込みました`),await ve.incrementViewCount(j);else{console.log(`⚠️ ユーザー「${j}」のデータが見つかりません`);const L=_a[j];if(L){const k={username:j,displayName:j,bio:"",themeColor:je[0],socialLinks:{},favoriteGenres:[],songs:L.map(A=>({...A,id:`${A.title}-${A.artist}`.replace(/\s+/g,"-").toLowerCase(),previewUrl:null,addedAt:new Date().toISOString()})),gridLayout:st[1],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),viewCount:0,isPublic:!0};s(k),console.log(`📄 users.jsonからフォールバックデータを使用: ${j}`)}}}catch(E){console.error(`❌ ユーザーデータの読み込みに失敗: ${j}`,E)}finally{o(!1)}},m=async j=>{try{const E=localStorage.getItem("spotify_access_token");if(!E)return console.log("Spotifyトークンがありません。検索をスキップします。"),j;const L=await ce.searchTracksAdvanced(j.title,j.artist,E);if(L.length>0){const k=L[0];return{...j,spotify:{id:k.id,previewUrl:k.previewUrl,spotifyUrl:k.spotifyUrl}}}}catch(E){console.error("Spotify検索エラー:",E)}return j},x=async j=>{try{const E=await Xt.searchMusic(`${j.title} ${j.artist}`);if(E.length>0){const L=E[0];return{...j,youtube:{videoId:L.videoId,title:L.title,channelTitle:L.channelTitle,embedUrl:L.embedUrl}}}}catch(E){console.error("YouTube検索エラー:",E)}return j},y=async j=>{let E=j;return j.spotify||(E=await m(E)),j.youtube||(E=await x(E)),E},v=async j=>{if(!d){u(!0);try{const E=await y(j);i(E),c(!0)}catch(E){console.error("楽曲プレビューの取得に失敗しました:",E)}finally{u(!1)}}},S=()=>{c(!1),i(null)};if(n)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"読み込み中..."})]})});if(!t||!t.songs||t.songs.length===0)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[r.jsx("div",{className:"text-6xl mb-4",children:"🎵"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"ユーザーが見つかりません"}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["お探しのユーザー「",e,"」は存在しないか、楽曲が登録されていません。"]}),r.jsxs(me,{to:"/",className:"inline-flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"ホームに戻る"]})]})});const R=t.themeColor||je[0];return r.jsxs("div",{className:"min-h-screen bg-black relative overflow-hidden",children:[r.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${R.gradient} opacity-20`}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center justify-between p-6",children:[r.jsxs(me,{to:"/",className:"flex items-center text-white hover:text-gray-300 transition-colors",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"ホームに戻る"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>b(!f),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${f?"bg-white text-black":"bg-white/10 text-white border border-white/20 hover:bg-white/20"}`,children:"統計"}),r.jsx("button",{onClick:()=>g(!p),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p?"bg-white text-black":"bg-white/10 text-white border border-white/20 hover:bg-white/20"}`,children:"共有"})]})]}),(f||p)&&r.jsx("div",{className:"px-6 mb-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f&&r.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:r.jsx(_l,{songs:t.songs})}),p&&r.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:r.jsx(Tl,{username:t.username,displayName:t.displayName,bio:t.bio})})]})}),r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-12",children:[r.jsxs("div",{className:"mb-6 flex flex-wrap gap-2 justify-center",children:[r.jsx("span",{className:"text-white/80 text-sm mr-2",children:"レイアウト:"}),st.map(j=>r.jsx("button",{onClick:()=>{console.log(`レイアウト変更: ${j.name}`)},className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.gridLayout.id===j.id?"bg-white text-black":"bg-white/10 text-white border border-white/20 hover:bg-white/20"}`,children:j.name},j.id))]}),r.jsx("div",{className:"w-full max-w-4xl",children:r.jsx("div",{className:"grid gap-2 aspect-square",style:{gridTemplateColumns:`repeat(${t.gridLayout.size}, 1fr)`,gridTemplateRows:`repeat(${t.gridLayout.size}, 1fr)`},children:Array.from({length:t.gridLayout.totalCells}).map((j,E)=>{const L=E===t.gridLayout.centerPosition,k=L?-1:E<t.gridLayout.centerPosition?E:E-1,A=k>=0&&k<t.songs.length?t.songs[k]:null;return r.jsx("div",{className:"aspect-square relative overflow-hidden rounded-lg",children:L?r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black/10 backdrop-blur-sm",children:t.icon?r.jsx("img",{src:t.icon,alt:`${t.displayName}のアイコン`,className:"w-full h-full object-cover rounded-lg border-2 border-white/30 shadow-xl"}):r.jsx("div",{className:`w-full h-full rounded-lg bg-gradient-to-br ${R.gradient} flex items-center justify-center text-white font-bold shadow-xl border-2 border-white/30`,children:r.jsx("span",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl",children:t.displayName.charAt(0).toUpperCase()})})}):A?r.jsx("div",{onClick:()=>v(A),className:`w-full h-full cursor-pointer transform hover:scale-105 transition-all duration-300 hover:shadow-2xl group ${d?"opacity-50 cursor-not-allowed":""}`,children:r.jsxs("div",{className:"relative w-full h-full",children:[r.jsx("img",{src:A.jacket,alt:"",className:"w-full h-full object-cover rounded-lg shadow-lg"}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 rounded-lg flex items-center justify-center",children:r.jsx("div",{className:"bg-white bg-opacity-90 rounded-full p-2 sm:p-3 transform scale-0 group-hover:scale-100 transition-transform duration-300",children:r.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 text-gray-800",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M8 5v14l11-7z"})})})}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-0 group-hover:bg-opacity-90 transition-all duration-300 rounded-b-lg p-2 opacity-0 group-hover:opacity-100",children:[r.jsx("p",{className:"text-white text-xs font-medium truncate",children:A.title}),r.jsx("p",{className:"text-white/80 text-xs truncate",children:A.artist})]})]})}):r.jsx("div",{className:"w-full h-full bg-white/5 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center",children:r.jsxs("div",{className:"text-white/30 text-center",children:[r.jsx("svg",{className:"w-6 h-6 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),r.jsx("p",{className:"text-xs",children:"空き"})]})})},E)})})}),r.jsxs("div",{className:"text-center mt-12",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-4",children:t.displayName}),t.bio&&r.jsx("p",{className:"text-white/80 text-lg mb-4",children:t.bio}),r.jsxs("div",{className:"flex items-center justify-center gap-6 text-white/60",children:[r.jsxs("span",{children:["🎵 ",t.songs.length,"曲"]}),t.viewCount>0&&r.jsxs("span",{children:["👁️ ",t.viewCount,"回閲覧"]}),t.location&&r.jsxs("span",{children:["📍 ",t.location]})]}),Object.keys(t.socialLinks).length>0&&r.jsxs("div",{className:"flex gap-4 mt-8 justify-center",children:[t.socialLinks.twitter&&r.jsx("a",{href:t.socialLinks.twitter,target:"_blank",rel:"noopener noreferrer",className:"bg-white/10 backdrop-blur-sm text-white p-3 rounded-full hover:bg-white/20 transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),t.socialLinks.instagram&&r.jsx("a",{href:t.socialLinks.instagram,target:"_blank",rel:"noopener noreferrer",className:"bg-white/10 backdrop-blur-sm text-white p-3 rounded-full hover:bg-white/20 transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),t.socialLinks.spotify&&r.jsx("a",{href:t.socialLinks.spotify,target:"_blank",rel:"noopener noreferrer",className:"bg-white/10 backdrop-blur-sm text-white p-3 rounded-full hover:bg-white/20 transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"})})})]})]})]}),l&&a&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"楽曲プレイヤー"}),r.jsx("button",{onClick:S,className:"text-gray-500 hover:text-gray-700 transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("img",{src:a.jacket,alt:`${a.title} - ${a.artist}`,className:"w-40 h-40 mx-auto rounded-lg shadow-lg mb-4"}),r.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:a.title}),r.jsx("p",{className:"text-gray-600",children:a.artist})]}),a.spotify&&r.jsx("div",{className:"mb-4",children:r.jsx(Ia,{previewUrl:a.spotify.previewUrl,title:a.title,artist:a.artist,coverImage:a.jacket||"/default-cover.jpg"})}),a.youtube&&r.jsx("div",{className:"mb-4",children:r.jsx($a,{videoId:a.youtube.videoId,title:a.youtube.title,artist:a.artist,coverImage:a.jacket||"/default-cover.jpg"})}),!a.spotify&&!a.youtube&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{children:"プレビューが見つかりませんでした"})]})]})})]})]})}function Pl({onIconChange:e,currentIcon:t,className:s=""}){const[n,o]=N.useState(null),[a,i]=N.useState({x:20,y:20,size:60}),[l,c]=N.useState(!1),[d,u]=N.useState(!1),[f,b]=N.useState(!1),[p,g]=N.useState(!1),[h,m]=N.useState(!1),[x,y]=N.useState({x:0,y:0}),[v,S]=N.useState({size:0,mouseX:0,mouseY:0}),R=N.useRef(null),j=N.useRef(null),E=N.useRef(null),L=N.useRef(null);N.useEffect(()=>{const C=()=>{b(window.innerWidth<=768)};return C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]);const k=()=>{if(!j.current)return{width:0,height:0};const C=j.current.getBoundingClientRect();return{width:C.width,height:C.height}};N.useEffect(()=>{const C=I=>{I.key==="Escape"&&l&&Fe()};return l&&(document.addEventListener("keydown",C),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",C),document.body.style.overflow="unset"}},[l]);const A=C=>{var U;const I=(U=C.target.files)==null?void 0:U[0];if(!I)return;const B=5,T=B*1024*1024;if(I.size>T){alert(`ファイルサイズは${B}MB以下にしてください。現在のサイズ: ${(I.size/1024/1024).toFixed(1)}MB`),R.current&&(R.current.value="");return}if(!I.type.startsWith("image/")){alert("画像ファイルを選択してください"),R.current&&(R.current.value="");return}const _=new FileReader;_.onload=O=>{var Y;const H=(Y=O.target)==null?void 0:Y.result;o(H),c(!0),i({x:25,y:25,size:50})},_.readAsDataURL(I)},$=C=>{if(!E.current||!j.current)return;E.current.getBoundingClientRect();const I=j.current.getBoundingClientRect(),B=(C.clientX-I.left)/I.width*100,T=(C.clientY-I.top)/I.height*100;B>=a.x&&B<=a.x+a.size&&T>=a.y&&T<=a.y+a.size&&(g(!0),y({x:B-a.x,y:T-a.y}))},z=C=>{if(!(!p&&!h)&&j.current){if(h){const I=C.clientY-v.mouseY,B=k(),T=Math.min(B.width,B.height),_=I/T*100;let U=v.size+_;U=Math.max(10,Math.min(100,U));const O=U/100*T,H=(B.width-O)/B.width*100,Y=(B.height-O)/B.height*100;i(J=>({size:U,x:Math.min(J.x,H),y:Math.min(J.y,Y)}))}else if(p){const I=j.current.getBoundingClientRect(),B=(C.clientX-I.left)/I.width*100,T=(C.clientY-I.top)/I.height*100,_=k(),U=Math.min(_.width,_.height),O=a.size/100*U,H=(_.width-O)/_.width*100,Y=(_.height-O)/_.height*100,J=Math.max(0,Math.min(H,B-x.x)),Q=Math.max(0,Math.min(Y,T-x.y));i(ne=>({...ne,x:J,y:Q}))}}},M=()=>{g(!1),m(!1)},q=C=>{if(!E.current||!j.current)return;const I=C.touches[0],B=j.current.getBoundingClientRect(),T=(I.clientX-B.left)/B.width*100,_=(I.clientY-B.top)/B.height*100;T>=a.x&&T<=a.x+a.size&&_>=a.y&&_<=a.y+a.size&&(g(!0),y({x:T-a.x,y:_-a.y}))},K=C=>{if(!p&&!h||!j.current)return;C.preventDefault();const I=C.touches[0];if(h){const B=I.clientY-v.mouseY,T=k(),_=Math.min(T.width,T.height),U=B/_*100;let O=v.size+U;O=Math.max(10,Math.min(100,O));const H=O/100*_,Y=(T.width-H)/T.width*100,J=(T.height-H)/T.height*100;i(Q=>({size:O,x:Math.min(Q.x,Y),y:Math.min(Q.y,J)}))}else if(p){const B=j.current.getBoundingClientRect(),T=(I.clientX-B.left)/B.width*100,_=(I.clientY-B.top)/B.height*100,U=k(),O=Math.min(U.width,U.height),H=a.size/100*O,Y=(U.width-H)/U.width*100,J=(U.height-H)/U.height*100,Q=Math.max(0,Math.min(Y,T-x.x)),ne=Math.max(0,Math.min(J,_-x.y));i(kt=>({...kt,x:Q,y:ne}))}},St=()=>{g(!1),m(!1)},ze=async()=>{if(j.current){u(!0);try{const C=document.createElement("canvas"),I=C.getContext("2d");if(!I)return;const B=j.current.naturalWidth/j.current.width,T=j.current.naturalHeight/j.current.height,_=Math.min(j.current.width,j.current.height),U=a.size/100*_,O=a.x/100*j.current.width,H=a.y/100*j.current.height,Y=256,J=Math.min(U*Math.min(B,T),Y);C.width=J,C.height=J,I.imageSmoothingEnabled=!0,I.imageSmoothingQuality="high",I.drawImage(j.current,O*B,H*T,U*B,U*T,0,0,J,J);const Q=C.toDataURL("image/jpeg",.85);e(Q),o(null),c(!1)}catch(C){console.error("トリミングエラー:",C),alert("トリミング中にエラーが発生しました")}finally{u(!1)}}},Fe=()=>{o(null),c(!1),R.current&&(R.current.value="")},Ks=C=>{C.target===C.currentTarget&&Fe()},Gs=()=>{e(""),R.current&&(R.current.value="")},Xs=C=>{C.preventDefault(),C.stopPropagation(),m(!0),S({size:a.size,mouseX:C.clientX,mouseY:C.clientY})},Qs=C=>{C.preventDefault(),C.stopPropagation();const I=C.touches[0];m(!0),S({size:a.size,mouseX:I.clientX,mouseY:I.clientY})},Zs=C=>{C.key==="Enter"&&(C.preventDefault(),C.stopPropagation(),ze())},en=()=>!l||!n?null:Dr.createPortal(r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[99999] p-4",onClick:Ks,style:{position:"fixed",top:0,left:0,right:0,bottom:0},children:r.jsxs("div",{className:`bg-white rounded-xl shadow-2xl p-4 select-none ${f?"w-full h-full max-w-none max-h-none rounded-none":"max-w-2xl w-full max-h-[90vh] overflow-y-auto"}`,onClick:C=>C.stopPropagation(),onKeyDown:Zs,tabIndex:0,style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"アイコンをトリミング"}),r.jsx("button",{type:"button",onClick:Fe,className:"text-gray-400 hover:text-gray-600 transition-colors p-2",disabled:d,children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(()=>{k();const C=j.current?{width:j.current.naturalWidth,height:j.current.naturalHeight}:{width:0,height:0},I=k(),B=Math.min(I.width,I.height);return r.jsxs("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white p-2 text-xs rounded z-20",children:["画像情報",r.jsxs("div",{children:["元解像度: ",C.width," × ",C.height]}),r.jsxs("div",{children:["表示サイズ: ",I.width," × ",I.height]}),r.jsxs("div",{children:["元縦横比: ",(C.width/C.height).toFixed(2)]}),r.jsxs("div",{children:["表示縦横比: ",(I.width/I.height).toFixed(2)]}),r.jsxs("div",{children:["短辺/長辺: ",Math.min(C.width,C.height)," / ",Math.max(C.width,C.height)]}),r.jsx("br",{}),"トリミング枠情報",r.jsxs("div",{children:["位置: ",a.x.toFixed(1),"%, ",a.y.toFixed(1),"%"]}),r.jsxs("div",{children:["サイズ: ",a.size,"%"]}),r.jsxs("div",{children:["ドラッグ中: ",p?"Yes":"No"]}),r.jsxs("div",{children:["リサイズ中: ",h?"Yes":"No"]}),r.jsx("div",{children:(()=>{const T=a.size/100*B;return`正方形サイズ: ${Math.round(T)}px × ${Math.round(T)}px`})()}),r.jsxs("div",{children:["実際幅: ",L.current?L.current.offsetWidth:0,"px"]}),r.jsxs("div",{children:["実際高: ",L.current?L.current.offsetHeight:0,"px"]}),r.jsxs("div",{children:["実際縦横比: ",L.current?(L.current.offsetWidth/L.current.offsetHeight).toFixed(2):"N/A"]}),r.jsxs("div",{children:["制限値: ",Math.round(B),"px"]}),r.jsx("br",{}),"マスク情報",r.jsx("div",{children:(()=>{const T=k(),_=a.size/100*Math.min(T.width,T.height),U=a.x/100*T.width,O=a.y/100*T.height,H=(U+_/2)/T.width*100,Y=(O+_/2)/T.height*100;Math.min(T.width,T.height);const J=_/2/T.width*100,Q=_/2/T.height*100,ne=Math.min(J,Q);return console.log("Mask debug:",{centerX:H,centerY:Y,radiusPercent:ne,imageSize:T,squareSize:_}),`中心: ${H.toFixed(1)}%, ${Y.toFixed(1)}% | 半径: ${ne.toFixed(1)}%`})()}),r.jsx("br",{}),"トリミング予定範囲",r.jsx("div",{children:(()=>{if(!j.current)return"N/A";const T=j.current.naturalWidth/j.current.width,_=j.current.naturalHeight/j.current.height,U=Math.min(j.current.width,j.current.height),H=a.size/100*U*Math.min(T,_);return`最終出力: ${Math.round(H)}px × ${Math.round(H)}px`})()})]})})(),r.jsx("div",{className:`mb-6 ${f?"flex-1 flex items-center justify-center":""}`,children:r.jsxs("div",{ref:E,className:`relative inline-block ${h?"cursor-se-resize":p?"cursor-grabbing":"cursor-move"} select-none`,style:{maxWidth:"100%",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},onMouseDown:$,onMouseMove:z,onMouseUp:M,onMouseLeave:M,onTouchStart:q,onTouchMove:K,onTouchEnd:St,children:[r.jsx("img",{ref:j,src:n,alt:"トリミング対象",className:"max-w-full max-h-full object-contain rounded-lg select-none",style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",WebkitTouchCallout:"none",WebkitUserDrag:"none"},draggable:!1}),(()=>{var hr,mr;const C=k(),I=Math.min(C.width,C.height);if(C.width===0||C.height===0)return null;const B=(hr=j.current)==null?void 0:hr.getBoundingClientRect(),T=(mr=E.current)==null?void 0:mr.getBoundingClientRect();console.log("=== デバッグ情報 ==="),console.log("画像サイズ:",C),console.log("画像要素の位置:",B),console.log("コンテナの位置:",T);const _=a.size/100*I,U=a.x/100*C.width,O=a.y/100*C.height,H=(U+_/2)/C.width*100,Y=(O+_/2)/C.height*100,J=_/2,Q=J/C.width*100,ne=J/C.height*100,kt=Math.max(Q,ne);console.log("トリミング枠:",{cropLeft:U,cropTop:O,squareSize:_,radiusPx:J}),console.log("マスク中心座標:",{centerX:H,centerY:Y}),console.log("半径計算:",{radiusPercentX:Q,radiusPercentY:ne,radiusPercent:kt,画像サイズ:C});const Ct=`radial-gradient(ellipse ${Q}% ${ne}% at ${H}% ${Y}%, transparent 97%, black 100%)`;return console.log("マスクスタイル:",Ct),r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`absolute inset-0 bg-black bg-opacity-50 pointer-events-none ${p||h?"":"transition-all duration-150"}`,style:{zIndex:5,WebkitMask:Ct,mask:Ct,backgroundColor:"rgba(0, 0, 0, 0.7)"}}),r.jsxs("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:4},children:[r.jsx("div",{className:"absolute bg-black bg-opacity-40",style:{top:0,left:0,right:0,height:`${O}px`}}),r.jsx("div",{className:"absolute bg-black bg-opacity-40",style:{bottom:0,left:0,right:0,height:`${C.height-O-_}px`}}),r.jsx("div",{className:"absolute bg-black bg-opacity-40",style:{top:`${O}px`,left:0,width:`${U}px`,height:`${_}px`}}),r.jsx("div",{className:"absolute bg-black bg-opacity-40",style:{top:`${O}px`,right:0,width:`${C.width-U-_}px`,height:`${_}px`}})]}),r.jsx("div",{className:`absolute border-2 border-dashed border-white pointer-events-none ${p||h?"":"transition-all duration-150"}`,style:{left:`${U}px`,top:`${O}px`,width:`${_}px`,height:`${_}px`,zIndex:8,opacity:.8}}),r.jsxs("div",{ref:L,className:`absolute border-2 border-white ${p||h?"border-blue-400":""} transition-colors duration-150`,style:{left:`${U}px`,top:`${O}px`,width:`${_}px`,height:`${_}px`,cursor:h?"se-resize":p?"grabbing":"move",transition:p||h?"none":"all 0.15s ease",zIndex:10,pointerEvents:"auto",backgroundColor:"transparent"},title:`正方形サイズ: ${Math.round(_)}px × ${Math.round(_)}px`,children:[r.jsxs("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:11},children:[r.jsx("div",{className:`absolute ${f?"border-l-2":"border-l"} border-white opacity-50`,style:{left:"33.333%",top:0,height:"100%"}}),r.jsx("div",{className:`absolute ${f?"border-l-2":"border-l"} border-white opacity-50`,style:{left:"66.666%",top:0,height:"100%"}}),r.jsx("div",{className:`absolute ${f?"border-t-2":"border-t"} border-white opacity-50`,style:{top:"33.333%",left:0,width:"100%"}}),r.jsx("div",{className:`absolute ${f?"border-t-2":"border-t"} border-white opacity-50`,style:{top:"66.666%",left:0,width:"100%"}})]}),r.jsx("div",{className:`absolute -top-1 -left-1 ${f?"w-4 h-4":"w-3 h-3"} bg-white border border-gray-400`,style:{zIndex:15}}),r.jsx("div",{className:`absolute -top-1 -right-1 ${f?"w-4 h-4":"w-3 h-3"} bg-white border border-gray-400`,style:{zIndex:15}}),r.jsx("div",{className:`absolute -bottom-1 -left-1 ${f?"w-4 h-4":"w-3 h-3"} bg-white border border-gray-400`,style:{zIndex:15}}),r.jsx("div",{className:`absolute -bottom-1 -right-1 ${f?"w-4 h-4":"w-3 h-3"} bg-white border border-gray-400`,style:{zIndex:15}}),r.jsx("div",{className:`absolute -bottom-2 -right-2 ${f?"w-6 h-6":"w-5 h-5"} bg-blue-500 border-2 border-white rounded cursor-se-resize hover:bg-blue-600 transition-colors shadow-lg`,style:{zIndex:16},onMouseDown:Xs,onTouchStart:Qs,title:"ドラッグしてサイズを変更"}),r.jsx("div",{className:"absolute inset-0 border-2 border-blue-400 rounded-full pointer-events-none opacity-75",style:{zIndex:12}})]})]})})()]})}),r.jsxs("div",{className:"flex justify-end space-x-3 relative z-20",children:[r.jsx("button",{type:"button",onClick:Fe,className:"px-6 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium",disabled:d,children:"キャンセル"}),r.jsx("button",{type:"button",onClick:ze,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 font-medium",disabled:d,children:d?"処理中...":"適用"})]})]})}),document.body);return r.jsxs("div",{className:`space-y-4 ${s}`,children:[t&&!l&&r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:t,alt:"ユーザーアイコン",className:"w-20 h-20 rounded-full object-cover border-2 border-gray-200"}),r.jsx("button",{type:"button",onClick:Gs,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-sm hover:bg-red-600 transition-colors",children:"×"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"アイコンが設定されています"}),r.jsx("button",{type:"button",onClick:()=>{var C;return(C=R.current)==null?void 0:C.click()},className:"text-sm text-blue-500 hover:text-blue-600",children:"変更する"})]})]}),!t&&!l&&r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[r.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:A,className:"hidden"}),r.jsxs("button",{type:"button",onClick:()=>{var C;return(C=R.current)==null?void 0:C.click()},className:"flex flex-col items-center space-y-2 text-gray-600 hover:text-blue-500",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),r.jsx("span",{className:"text-sm",children:"アイコンをアップロード"}),r.jsx("span",{className:"text-xs text-gray-400",children:"JPG, PNG (5MB以下)"})]})]}),r.jsx(en,{})]})}function Ml(){const e=fe(),[t,s]=N.useState({username:"",displayName:"",bio:"",themeColor:je[0],socialLinks:{},favoriteGenres:[],songs:[],gridLayout:st[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),viewCount:0,isPublic:!0}),[n,o]=N.useState(!1),[a,i]=N.useState({}),l=()=>{t.songs.length<20&&s(h=>({...h,songs:[...h.songs,{title:"",artist:"",jacket:"",genre:"",releaseYear:void 0}]}))},c=h=>{s(m=>({...m,songs:m.songs.filter((x,y)=>y!==h)}))},d=(h,m,x)=>{s(y=>({...y,songs:y.songs.map((v,S)=>S===h?{...v,[m]:x}:v)}))},u=(h,m)=>{d(h,"title",m.name),d(h,"artist",m.artist),d(h,"jacket",m.image||""),d(h,"isGeneratedImage",m.isGeneratedImage||!1)},f=h=>{s(m=>({...m,favoriteGenres:m.favoriteGenres.includes(h)?m.favoriteGenres.filter(x=>x!==h):[...m.favoriteGenres,h]}))},b=(h,m)=>{s(x=>({...x,socialLinks:{...x.socialLinks,[h]:m.trim()||void 0}}))},p=()=>{const h={};return t.username.trim()?/^[a-zA-Z0-9_-]+$/.test(t.username)||(h.username="ユーザー名は英数字、ハイフン、アンダースコアのみ使用可能です"):h.username="ユーザー名は必須です",t.displayName.trim()||(h.displayName="表示名は必須です"),t.songs.length===0&&(h.songs="最低1曲は追加してください"),t.songs.some(x=>!x.title||!x.artist)&&(h.songs="全ての楽曲のタイトルとアーティストを入力してください"),i(h),Object.keys(h).length===0},g=async h=>{if(h.preventDefault(),!!p()){o(!0);try{ks(t)?e(`/users/${t.username}`):i({submit:"データの保存に失敗しました"})}catch(m){console.error("データの保存に失敗しました:",m),i({submit:"データの保存に失敗しました"})}finally{o(!1)}}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"音楽名刺を作成"}),r.jsx("p",{className:"text-gray-600",children:"あなたの音楽の好みを世界に発信しましょう"})]}),r.jsxs("form",{onSubmit:g,className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"基本情報"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ユーザー名 *"}),r.jsx("input",{type:"text",value:t.username,onChange:h=>s(m=>({...m,username:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"example_user",required:!0}),a.username&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.username})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"表示名 *"}),r.jsx("input",{type:"text",value:t.displayName,onChange:h=>s(m=>({...m,displayName:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"山田太郎",required:!0}),a.displayName&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.displayName})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"自己紹介"}),r.jsx("textarea",{value:t.bio,onChange:h=>s(m=>({...m,bio:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"音楽が大好きです！様々なジャンルを聴きます。"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"居住地"}),r.jsx("input",{type:"text",value:t.location||"",onChange:h=>s(m=>({...m,location:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"東京都渋谷区"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"職業"}),r.jsx("input",{type:"text",value:t.occupation||"",onChange:h=>s(m=>({...m,occupation:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"エンジニア"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"外観設定"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"プロフィール画像"}),r.jsx(Pl,{currentIcon:t.icon,onIconChange:h=>s(m=>({...m,icon:h}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"テーマカラー"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:je.map(h=>r.jsxs("label",{className:"cursor-pointer",children:[r.jsx("input",{type:"radio",name:"themeColor",value:h.id,checked:t.themeColor.id===h.id,onChange:()=>s(m=>({...m,themeColor:h})),className:"sr-only"}),r.jsxs("div",{className:`p-3 rounded-lg border-2 transition-all ${t.themeColor.id===h.id?"border-gray-800 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("div",{className:`w-full h-8 rounded-lg bg-gradient-to-r ${h.gradient} mb-2`}),r.jsx("p",{className:"text-sm font-medium text-gray-800",children:h.name})]})]},h.id))})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"SNSリンク"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Twitter"}),r.jsx("input",{type:"url",value:t.socialLinks.twitter||"",onChange:h=>b("twitter",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://twitter.com/username"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instagram"}),r.jsx("input",{type:"url",value:t.socialLinks.instagram||"",onChange:h=>b("instagram",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://instagram.com/username"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spotify"}),r.jsx("input",{type:"url",value:t.socialLinks.spotify||"",onChange:h=>b("spotify",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://open.spotify.com/user/username"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),r.jsx("input",{type:"url",value:t.socialLinks.website||"",onChange:h=>b("website",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"好きなジャンル"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"最大5つまで選択できます"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Ir.map(h=>r.jsxs("label",{className:"cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:t.favoriteGenres.includes(h),onChange:()=>f(h),disabled:!t.favoriteGenres.includes(h)&&t.favoriteGenres.length>=5,className:"sr-only"}),r.jsx("div",{className:`p-3 rounded-lg border-2 transition-all text-center ${t.favoriteGenres.includes(h)?`border-${t.themeColor.primary} bg-${t.themeColor.primary}/10 text-${t.themeColor.primary}`:"border-gray-200 hover:border-gray-300 text-gray-700"} ${!t.favoriteGenres.includes(h)&&t.favoriteGenres.length>=5?"opacity-50 cursor-not-allowed":""}`,children:r.jsx("p",{className:"text-sm font-medium",children:h})})]},h))})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"お気に入りの楽曲"}),r.jsx("button",{type:"button",onClick:l,disabled:t.songs.length>=20,className:`px-4 py-2 rounded-lg font-medium transition-colors ${t.songs.length>=20?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"楽曲を追加"})]}),a.songs&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-red-600",children:a.songs})}),r.jsx("div",{className:"space-y-4",children:t.songs.map((h,m)=>r.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["楽曲 ",m+1]}),r.jsx("button",{type:"button",onClick:()=>c(m),className:"text-red-500 hover:text-red-700 transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),r.jsx(ar,{onSelect:x=>u(m,x),placeholder:"曲名やアーティスト名を検索..."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ジャンル"}),r.jsxs("select",{value:h.genre||"",onChange:x=>d(m,"genre",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"選択してください"}),Ir.map(x=>r.jsx("option",{value:x,children:x},x))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"リリース年"}),r.jsx("input",{type:"number",value:h.releaseYear||"",onChange:x=>{const y=parseInt(x.target.value);d(m,"releaseYear",isNaN(y)?"":y)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"2023",min:"1900",max:new Date().getFullYear()})]})]}),h.jacket&&r.jsx("div",{className:"mt-3",children:r.jsx("img",{src:h.jacket,alt:`${h.title} - ${h.artist}`,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"})})]},m))}),t.songs.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),r.jsx("p",{children:"楽曲を追加してください"})]})]}),r.jsxs("div",{className:"text-center",children:[a.submit&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-red-600",children:a.submit})}),r.jsx("button",{type:"submit",disabled:n,className:`px-8 py-3 rounded-xl font-semibold transition-all ${n?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-cyan-500 text-white hover:from-blue-600 hover:to-cyan-600 hover:scale-105"} shadow-lg hover:shadow-xl`,children:n?"作成中...":"音楽名刺を作成"})]})]})]})})})}function Bl({className:e=""}){const[t,s]=N.useState({totalUsers:0,totalSongs:0,totalViews:0,storageSizeKB:0}),[n,o]=N.useState([]),[a,i]=N.useState(!1);N.useEffect(()=>{l()},[]);const l=()=>{s(Ca()),o(Cs())},c=()=>{pt()?(alert("✅ バックアップを作成しました"),l()):alert("❌ バックアップの作成に失敗しました")},d=()=>{confirm("バックアップから復元しますか？現在のデータは上書きされます。")&&(ja()?(alert("✅ バックアップから復元しました"),l(),window.location.reload()):alert("❌ バックアップからの復元に失敗しました"))},u=()=>{try{const p=Na(),g=new Blob([p],{type:"application/json"}),h=URL.createObjectURL(g),m=document.createElement("a");m.href=h,m.download=`musicmeisi_backup_${new Date().toISOString().split("T")[0]}.json`,m.click(),URL.revokeObjectURL(h),alert("✅ データをエクスポートしました")}catch(p){console.error("エクスポートエラー:",p),alert("❌ データのエクスポートに失敗しました")}},f=p=>{var m;const g=(m=p.target.files)==null?void 0:m[0];if(!g)return;const h=new FileReader;h.onload=x=>{var y;try{const v=(y=x.target)==null?void 0:y.result;Sa(v)?(alert("✅ データをインポートしました"),l(),window.location.reload()):alert("❌ データのインポートに失敗しました")}catch(v){console.error("インポートエラー:",v),alert("❌ 無効なファイル形式です")}},h.readAsText(g),p.target.value=""},b=p=>p?new Date(p).toLocaleString("ja-JP"):"N/A";return r.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 ${e}`,children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 1.79 4 4 4h8c2.21 0 4-1.79 4-4V7M4 7V4a1 1 0 011-1h5l2 2h6a1 1 0 011 1v1M4 7h16"})}),"データ管理"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.totalUsers}),r.jsx("div",{className:"text-sm text-blue-800",children:"総ユーザー数"})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.totalSongs}),r.jsx("div",{className:"text-sm text-green-800",children:"総楽曲数"})]}),r.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.totalViews}),r.jsx("div",{className:"text-sm text-purple-800",children:"総閲覧数"})]}),r.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.storageSizeKB}),r.jsx("div",{className:"text-sm text-orange-800",children:"ストレージ (KB)"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[r.jsxs("button",{onClick:c,className:"flex items-center justify-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"})}),"バックアップ"]}),r.jsxs("button",{onClick:d,className:"flex items-center justify-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"復元"]}),r.jsxs("button",{onClick:u,className:"flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"エクスポート"]}),r.jsxs("label",{className:"flex items-center justify-center gap-2 px-3 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm cursor-pointer",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),"インポート",r.jsx("input",{type:"file",accept:".json",onChange:f,className:"sr-only"})]})]}),r.jsx("div",{className:"mb-4",children:r.jsxs("button",{onClick:()=>i(!a),className:"flex items-center text-gray-600 hover:text-gray-800 text-sm font-medium",children:[r.jsx("svg",{className:`w-4 h-4 mr-2 transition-transform ${a?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"ユーザー詳細を",a?"非表示":"表示"]})}),a&&r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-700",children:"ユーザー名"}),r.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-700",children:"表示名"}),r.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-700",children:"楽曲数"}),r.jsx("th",{className:"text-right py-2 px-3 font-medium text-gray-700",children:"閲覧数"}),r.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-700",children:"更新日時"})]})}),r.jsx("tbody",{children:n.map(p=>r.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[r.jsx("td",{className:"py-2 px-3 font-mono text-sm",children:p.username}),r.jsx("td",{className:"py-2 px-3",children:p.displayName}),r.jsx("td",{className:"py-2 px-3 text-right",children:p.songCount}),r.jsx("td",{className:"py-2 px-3 text-right",children:p.viewCount}),r.jsx("td",{className:"py-2 px-3 text-xs text-gray-500",children:b(p.updatedAt)})]},p.username))})]}),n.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293L16 14H8l-2.707-1.707A1 1 0 004.586 13H2"})}),r.jsx("p",{children:"登録されているユーザーがいません"})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-800 mb-2",children:"💡 使用方法"}),r.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[r.jsxs("li",{children:["• ",r.jsx("strong",{children:"バックアップ"}),": 現在のデータをブラウザ内に保存"]}),r.jsxs("li",{children:["• ",r.jsx("strong",{children:"復元"}),": バックアップからデータを復元"]}),r.jsxs("li",{children:["• ",r.jsx("strong",{children:"エクスポート"}),": データをJSONファイルとしてダウンロード"]}),r.jsxs("li",{children:["• ",r.jsx("strong",{children:"インポート"}),": JSONファイルからデータを読み込み"]})]})]})]})}function Ul(){const e=fe(),[t,s]=N.useState([]),[n,o]=N.useState(!0),[a,i]=N.useState(!1),[l,c]=N.useState(!1);N.useEffect(()=>{d()},[]);const d=()=>{const h=localStorage.getItem("musicard_admin"),m=localStorage.getItem("musicard_admin_login_time");if(!h||!m){console.warn("🛡️ 管理者権限がありません"),e("/admin-login");return}const x=parseInt(m),y=Date.now(),v=24*60*60*1e3;if(y-x>v){console.warn("🛡️ 管理者セッションが期限切れです"),localStorage.removeItem("musicard_admin"),localStorage.removeItem("musicard_admin_login_time"),e("/admin-login");return}if(!({}.VITE_ADMIN_USERS||"admin").split(",").includes(h)){console.warn("🛡️ 管理者権限が無効です"),e("/admin-login");return}c(!0),u()};N.useEffect(()=>{l&&u()},[l]);const u=()=>{try{const h=Cs();s(h)}catch(h){console.error("ユーザーデータの読み込みに失敗しました:",h)}finally{o(!1)}},f=h=>{confirm(`${h}の名刺を削除しますか？この操作は取り消せません。`)&&(ya(h)?(u(),alert(`✅ ${h}の名刺を削除しました`)):alert(`❌ ${h}の削除に失敗しました`))},b=h=>{e(`/edit/${h}`)},p=()=>{confirm("管理者ログアウトしますか？")&&(localStorage.removeItem("musicard_admin"),localStorage.removeItem("musicard_admin_login_time"),e("/"))},g=h=>h?new Date(h).toLocaleString("ja-JP"):"N/A";return l?n?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"読み込み中..."})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"管理者パネル"}),r.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"ADMIN"})]}),r.jsx("p",{className:"text-gray-600",children:"音楽名刺の管理とデータ統計"}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["管理者: ",localStorage.getItem("musicard_admin")]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>i(!a),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a?"bg-blue-600 text-white":"bg-white text-blue-600 border border-blue-200 hover:bg-blue-50"}`,children:"データ管理"}),r.jsx("button",{onClick:p,className:"bg-red-500 text-white px-6 py-2 rounded-lg font-medium hover:bg-red-600 transition-colors",children:"ログアウト"}),r.jsx(me,{to:"/",className:"bg-white text-gray-700 px-6 py-2 rounded-lg font-medium hover:bg-gray-50 transition-colors border border-gray-200",children:"ホームに戻る"})]})]}),a&&r.jsx("div",{className:"mb-8",children:r.jsx(Bl,{})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-600",children:t.length}),r.jsx("div",{className:"text-gray-600",children:"総ユーザー数"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-600",children:t.reduce((h,m)=>h+m.songCount,0)}),r.jsx("div",{className:"text-gray-600",children:"総楽曲数"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-purple-600",children:t.reduce((h,m)=>h+m.viewCount,0)}),r.jsx("div",{className:"text-gray-600",children:"総閲覧数"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-orange-600",children:t.length>0?Math.round(t.reduce((h,m)=>h+m.songCount,0)/t.length):0}),r.jsx("div",{className:"text-gray-600",children:"平均楽曲数"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"登録ユーザー一覧"})}),t.length===0?r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"text-6xl mb-6",children:"🎵"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"名刺がまだありません"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"最初の音楽名刺を作成してみましょう"}),r.jsxs(me,{to:"/create",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-medium hover:from-blue-600 hover:to-cyan-600 transition-all hover:scale-105 shadow-lg",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"名刺を作成"]})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left py-3 px-6 font-medium text-gray-700",children:"ユーザー"}),r.jsx("th",{className:"text-left py-3 px-6 font-medium text-gray-700",children:"楽曲数"}),r.jsx("th",{className:"text-left py-3 px-6 font-medium text-gray-700",children:"閲覧数"}),r.jsx("th",{className:"text-left py-3 px-6 font-medium text-gray-700",children:"更新日"}),r.jsx("th",{className:"text-left py-3 px-6 font-medium text-gray-700",children:"操作"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(h=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"py-4 px-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center text-white font-semibold",children:h.displayName.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:h.displayName}),r.jsxs("div",{className:"text-sm text-gray-500 font-mono",children:["@",h.username]})]})]})}),r.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[h.songCount," 曲"]})}),r.jsx("td",{className:"py-4 px-6 text-sm text-gray-900",children:r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[h.viewCount," 回"]})}),r.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:g(h.updatedAt)}),r.jsx("td",{className:"py-4 px-6",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(me,{to:`/users/${h.username}`,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 transition-colors",children:"表示"}),r.jsx("button",{onClick:()=>b(h.username),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-green-700 bg-green-100 hover:bg-green-200 transition-colors",children:"編集"}),r.jsx("button",{onClick:()=>f(h.username),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 transition-colors",children:"削除"})]})})]},h.username))})]})})]}),r.jsxs("div",{className:"mt-8 bg-blue-50 rounded-xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"💡 使用方法"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"名刺の管理"}),r.jsxs("ul",{className:"space-y-1",children:[r.jsx("li",{children:"• 「表示」で名刺ページを表示"}),r.jsx("li",{children:"• 「編集」で名刺内容を編集"}),r.jsx("li",{children:"• 「削除」で名刺を完全削除"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"データ管理"}),r.jsxs("ul",{className:"space-y-1",children:[r.jsx("li",{children:"• 統計情報の確認"}),r.jsx("li",{children:"• データのバックアップ・復元"}),r.jsx("li",{children:"• エクスポート・インポート"})]})]})]})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"管理者認証を確認中..."})]})})}const Je=[{id:"blue",name:"ブルー",gradient:"from-blue-500 to-blue-600",primary:"blue-500",secondary:"blue-100"},{id:"purple",name:"パープル",gradient:"from-purple-500 to-purple-600",primary:"purple-500",secondary:"purple-100"},{id:"green",name:"グリーン",gradient:"from-green-500 to-green-600",primary:"green-500",secondary:"green-100"},{id:"pink",name:"ピンク",gradient:"from-pink-500 to-pink-600",primary:"pink-500",secondary:"pink-100"},{id:"orange",name:"オレンジ",gradient:"from-orange-500 to-orange-600",primary:"orange-500",secondary:"orange-100"},{id:"indigo",name:"インディゴ",gradient:"from-indigo-500 to-indigo-600",primary:"indigo-500",secondary:"indigo-100"}];function Ol(){const{username:e}=Fr(),t=fe(),[s,n]=N.useState([]),[o,a]=N.useState(""),[i,l]=N.useState(Je[0]),[c,d]=N.useState(!0),u=N.useCallback(m=>{try{const x=localStorage.getItem("musicmeisi_users");if(x){const y=JSON.parse(x);if(y[m]){const v=y[m];if(n(v.songs||v),a(v.icon||""),v.themeColor){const S=Je.find(R=>R.id===v.themeColor.id);l(S||Je[0])}}else alert("ユーザーが見つかりません"),t("/manage")}else alert("ユーザーデータが見つかりません"),t("/manage")}catch{alert("データの読み込みに失敗しました"),t("/manage")}finally{d(!1)}},[t]);N.useEffect(()=>{e&&u(e)},[e,u]);const f=()=>{n([...s,{title:"",artist:"",jacket:""}])},b=m=>{s.length>1&&n(s.filter((x,y)=>y!==m))},p=(m,x,y)=>{const v=[...s];v[m]={...v[m],[x]:y},n(v)},g=(m,x)=>{const y=[...s];y[m]={title:x.name,artist:x.artist,jacket:x.image||"",isGeneratedImage:x.isGeneratedImage},n(y)},h=async m=>{if(m.preventDefault(),!e){alert("ユーザー名が無効です");return}const x=s.filter(y=>y.title.trim()&&y.artist.trim());if(x.length===0){alert("少なくとも1つの楽曲情報を入力してください");return}try{const y=localStorage.getItem("musicmeisi_users"),v=y?JSON.parse(y):{};v[e]={username:e,icon:o,themeColor:i,songs:x,updatedAt:new Date().toISOString()},localStorage.setItem("musicmeisi_users",JSON.stringify(v)),alert("名刺が更新されました！"),t(`/users/${e}`)}catch{alert("エラーが発生しました。もう一度お試しください。")}};return c?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center",children:r.jsx("div",{className:"text-blue-600 text-xl",children:"読み込み中..."})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100",children:[r.jsx("div",{className:"sticky top-0 z-50 backdrop-blur-sm bg-white/80 border-b border-blue-200/50 shadow-sm",children:r.jsx("div",{className:"container mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h1",{className:"text-xl font-bold text-blue-900",children:[e,"の名刺を編集"]}),r.jsxs("button",{onClick:()=>t("/manage"),className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 transition-colors duration-300",children:[r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"管理画面に戻る"]})]})})}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsxs("form",{onSubmit:h,className:"space-y-8",noValidate:!0,children:[r.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-blue-200/50 shadow-lg",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-900 mb-6",children:"基本情報"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-blue-700 text-sm font-medium mb-2",children:"ユーザー名"}),r.jsx("input",{type:"text",value:e,disabled:!0,className:"w-full px-4 py-3 bg-blue-50 border border-blue-200 rounded-xl text-blue-500 cursor-not-allowed"}),r.jsx("p",{className:"text-blue-600 text-sm mt-2",children:"ユーザー名は変更できません"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-blue-700 text-sm font-medium mb-3",children:"名刺テーマカラー"}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:Je.map(m=>r.jsxs("button",{type:"button",onClick:()=>l(m),className:`p-3 rounded-xl border-2 transition-all duration-300 ${i.id===m.id?"border-blue-500 shadow-lg scale-105":"border-blue-200 hover:border-blue-300"}`,children:[r.jsx("div",{className:`w-full h-8 bg-gradient-to-r ${m.gradient} rounded-lg mb-2`}),r.jsx("span",{className:"text-sm text-blue-700 font-medium",children:m.name})]},m.id))}),r.jsx("p",{className:"text-blue-600 text-sm mt-2",children:"選択したカラーが名刺のアクセントカラーとして使用されます"})]})]}),r.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-blue-200/50 shadow-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"好きな音楽"}),r.jsx("button",{type:"button",onClick:f,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors duration-300",children:"曲を追加"})]}),r.jsx("div",{className:"space-y-6",children:s.map((m,x)=>r.jsxs("div",{className:"bg-slate-700/50 rounded-xl p-4 border border-slate-600/50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-white font-medium",children:["曲 ",x+1]}),s.length>1&&r.jsx("button",{type:"button",onClick:()=>b(x),className:"text-red-400 hover:text-red-300 transition-colors duration-300",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"音楽を検索"}),r.jsx(ar,{onSelect:y=>g(x,y),placeholder:"曲名やアーティスト名で検索...",className:"mb-3"}),r.jsx("p",{className:"text-slate-400 text-xs",children:"検索して自動入力するか、下記のフィールドに直接入力してください"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"曲名 *"}),r.jsx("input",{type:"text",value:m.title,onChange:y=>p(x,"title",y.target.value),className:"w-full px-3 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"曲名を入力"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"アーティスト *"}),r.jsx("input",{type:"text",value:m.artist,onChange:y=>p(x,"artist",y.target.value),className:"w-full px-3 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"アーティスト名を入力"})]})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:"ジャケット画像URL（任意）"}),r.jsx("input",{type:"text",value:m.jacket,onChange:y=>p(x,"jacket",y.target.value),className:"w-full px-3 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"}),r.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"未入力の場合はランダム画像が使用されます"})]})]},x))})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white py-4 rounded-xl font-semibold hover:from-purple-600 hover:to-pink-600 transition-all duration-300 hover:scale-105",children:"更新する"}),r.jsx("button",{type:"button",onClick:()=>t("/manage"),className:"px-8 py-4 bg-slate-700 text-white rounded-xl font-semibold hover:bg-slate-600 transition-all duration-300",children:"キャンセル"})]})]})})})]})}function Dl(){const[e]=nn(),t=fe(),[s,n]=N.useState("loading"),[o,a]=N.useState(""),i=N.useRef(!1);return N.useEffect(()=>{(async()=>{var c,d,u;if(i.current){console.log("🔄 認証処理は既に実行済みです");return}i.current=!0;try{const f=e.get("code"),b=e.get("state"),p=e.get("error");if(console.log("🔍 コールバックパラメータ確認:"),console.log(`   code: ${f?"✅ あり":"❌ なし"}`),console.log(`   state: ${b?"✅ あり":"❌ なし"}`),console.log(`   error: ${p||"なし"}`),p)throw new Error(`Spotify認証エラー: ${p}`);if(!f)throw new Error("認証コードが見つかりません");if(!b)throw new Error("状態パラメータが見つかりません");const g=localStorage.getItem("spotify_current_state"),h=localStorage.getItem(`spotify_auth_${b}`);let m=null;if(h)try{m=JSON.parse(h).codeVerifier}catch(y){console.error("❌ 認証データ解析エラー:",y)}if(console.log("🔍 LocalStorage状態確認:"),console.log(`   受信したcode: ${f.substring(0,10)}...`),console.log(`   受信したstate: "${b}"`),console.log(`   保存されたstate: "${g}"`),console.log(`   code_verifier: ${m?"✅ 存在":"❌ なし"}`),console.log(`   state一致: ${g===b}`),g!==b)throw new Error("State parameter不一致 - セキュリティエラー");console.log("🔄 認証コードをアクセストークンに交換中...");const x=await ps.getAccessToken(f,b);vs(x),localStorage.removeItem("spotify_current_state"),localStorage.removeItem(`spotify_auth_${b}`),xs("spotify"),n("success"),a("Spotify認証が完了しました！PKCEフローによる安全な認証です。"),window.history.replaceState({},document.title,"/callback"),setTimeout(()=>{t("/")},3e3)}catch(f){console.error("❌ Spotify認証エラー:",f),n("error"),a(f.message||"Spotify認証に失敗しました"),((c=f.message)!=null&&c.includes("Token exchange failed")||(d=f.message)!=null&&d.includes("Failed to get access token"))&&(console.error("🔍 トークン交換エラーの詳細:"),console.error("   • 認証コードが既に使用済みの可能性"),console.error("   • Client IDが間違っている可能性"),console.error("   • Redirect URIが正確に設定されていない可能性"),console.error("   • 認証コードの有効期限（10分）が切れている可能性"),console.error("   • code_verifierが見つからない可能性")),(u=f.message)!=null&&u.includes("Invalid authorization code")&&(console.warn("⚠️ 認証コードが無効です。新しい認証を開始してください。"),setTimeout(()=>{t("/")},5e3))}})()},[t,e]),r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center",children:r.jsx("div",{className:"max-w-md mx-auto p-8",children:r.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-8 border border-blue-200/50 shadow-lg text-center",children:[s==="loading"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold text-blue-900 mb-4",children:"🎧 Spotify認証処理中..."}),r.jsxs("p",{className:"text-blue-600",children:["認証コードをアクセストークンに交換しています...",r.jsx("br",{}),r.jsx("span",{className:"text-sm text-blue-500",children:"重複処理を防止中"})]})]}),s==="success"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-12 h-12 mx-auto mb-4 text-green-500",children:r.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),r.jsx("h1",{className:"text-2xl font-bold text-green-700 mb-4",children:"🎉 認証完了！"}),r.jsx("p",{className:"text-blue-600 mb-4",children:o}),r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-4",children:r.jsxs("p",{className:"text-green-700 text-sm",children:["✅ 音楽検索でSpotifyが利用可能になりました",r.jsx("br",{}),"✅ PKCEフローによる安全な認証を実現",r.jsx("br",{}),"✅ Client Secretが不要なセキュアな実装",r.jsx("br",{}),"✅ より高精度な検索結果を提供",r.jsx("br",{}),"✅ 認証コードの重複使用を防止"]})}),r.jsx("p",{className:"text-blue-500 text-sm",children:"3秒後に自動的にホームページに戻ります..."})]}),s==="error"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-12 h-12 mx-auto mb-4 text-red-500",children:r.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),r.jsx("h1",{className:"text-2xl font-bold text-red-700 mb-4",children:"❌ 認証に失敗しました"}),r.jsx("p",{className:"text-red-600 mb-4",children:o}),r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:r.jsxs("p",{className:"text-red-700 text-sm text-left",children:[r.jsx("strong",{children:"🔍 よくある解決方法:"}),r.jsx("br",{}),"• 認証コードの重複使用（ページリロード等）",r.jsx("br",{}),"• Spotify Developer Dashboardでredirect_uriを確認",r.jsx("br",{}),"• Client IDが正しく設定されているか確認",r.jsx("br",{}),"• ブラウザのキャッシュをクリアして再試行",r.jsx("br",{}),"• 認証コードの有効期限（10分）内に処理を完了",r.jsx("br",{}),"• code_verifierが失われた場合は新しい認証を開始"]})}),r.jsx("button",{onClick:()=>t("/"),className:"bg-blue-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-600 transition-colors duration-300",children:"ホームに戻る"})]})]})})})}function zl(){N.useState(!1);const[e,t]=N.useState($r()),[s,n]=N.useState(0);N.useEffect(()=>{o()},[]);const o=async()=>{try{const a=await ve.loadAllUsers();n(Object.keys(a).length),t($r())}catch(a){console.error("ストレージ統計の読み込みエラー:",a)}};return null}function Fl(){return r.jsxs(r.Fragment,{children:[r.jsxs(on,{children:[r.jsx(le,{path:"/",element:r.jsx(pa,{})}),r.jsx(le,{path:"/login",element:r.jsx(xa,{})}),r.jsx(le,{path:"/admin-login",element:r.jsx(ba,{})}),r.jsx(le,{path:"/dashboard",element:r.jsx(La,{})}),r.jsx(le,{path:"/users/:username",element:r.jsx($l,{})}),r.jsx(le,{path:"/create",element:r.jsx(Ml,{})}),r.jsx(le,{path:"/admin",element:r.jsx(Ul,{})}),r.jsx(le,{path:"/edit/:username",element:r.jsx(Ol,{})}),r.jsx(le,{path:"/callback",element:r.jsx(Dl,{})})]}),r.jsx(zl,{})]})}Ut.createRoot(document.getElementById("root")).render(r.jsx(sn.StrictMode,{children:r.jsx(an,{children:r.jsx(Fl,{})})}));
